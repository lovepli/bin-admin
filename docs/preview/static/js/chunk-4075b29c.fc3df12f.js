(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4075b29c"],{1830:function(e,t,a){"use strict";var i=a("c9c4"),l=a.n(i);l.a},1951:function(e,t,a){},"344a":function(e,t,a){"use strict";function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t["a"]={data:function(){return{moduleName:"",currentTreeNode:null,filterOpened:!1,listQuery:{size:10,page:1},total:0,list:[],listLoading:!1,btnLoading:!1,dialogStatus:""}},computed:{editTitle:function(){var e={check:this.moduleName+"详情",modify:"修改"+this.moduleName,create:"新增"+this.moduleName};return e[this.dialogStatus]||"标题"},isNormal:function(){return 0===this.dialogStatus.length},isCheck:function(){return"check"===this.dialogStatus},isEdit:function(){return"create"===this.dialogStatus||"modify"===this.dialogStatus},lockTreeSelect:function(){return"check"===this.dialogStatus||"modify"===this.dialogStatus},colorPrimary:function(){return{color:"#1890ff"}},colorSuccess:function(){return{color:"#52c41a"}},colorWarning:function(){return{color:"#fa8c16"}},colorDanger:function(){return{color:"#f5222d"}},colorInfo:function(){return{color:"#35495e"}}},watch:{dialogStatus:function(){window.scrollTo(0,0)}},methods:{treeMapper:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text",n=e.id,s=t?t.split(","):[];s.push(n);var r=[];e.children&&e.children.forEach((function(e){r.push(a.treeMapper(e,s.join(","),i,o))}));var d=!!this.currentTreeNode&&this.currentTreeNode.id===n,u=!!this.currentTreeNode&&this.currentTreeNode.parents.includes(n),c={};return i.forEach((function(t){e[t]&&(c[t]=e[t])})),l({id:e.id,title:e[o]},c,{parents:s,selected:d,expand:u,children:r})},formatOptions:function(e){var t=[];return Object.keys(e).forEach((function(a){t.push({value:a,label:e[a]})})),t},setListData:function(e){e?(this.list=e.list,this.total=e.total,this.listLoading=!1):this.listLoading=!0},openEditPage:function(e){this.dialogStatus=e,this.$refs.form&&this.$refs.form.resetFields()},handleCancel:function(){this.dialogStatus=""},submitDone:function(e){this.dialogStatus="",this.btnLoading=!1,e&&this.$message({type:"success",content:"操作成功"})},searchList:function(){console.error("searchList need overwrite (from mixin)")},handleFilter:function(){this.listQuery.page=1,this.searchList()},handleSizeChange:function(e){this.listQuery.page=1,this.listQuery.size=e,this.searchList()},handleCurrentChange:function(e){this.listQuery.page=e,this.searchList()}}}},3644:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("page-header-wrap",{directives:[{name:"show",rawName:"v-show",value:e.isNormal,expression:"isNormal"}]},[a("v-table-wrap",[a("v-filter-bar",[a("v-filter-item",{attrs:{title:"表单据名称",span:8}},[a("b-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name","string"===typeof t?t.trim():t)},expression:"listQuery.name"}})],1),a("v-filter-item",{on:{"on-search":e.handleFilter,"on-reset":e.resetQuery}})],1),a("v-table-tool-bar",[a("b-button",{attrs:{type:"primary",icon:"ios-add-circle-outline"},on:{click:e.handleCreate}},[e._v("新 增\n        ")])],1),a("b-table",{attrs:{columns:e.columns,data:e.list,loading:e.listLoading},scopedSlots:e._u([{key:"viewConfig",fn:function(t){var i=t.row;return[a("b-button",{attrs:{type:"text"},on:{click:function(t){return e.handleConfigView(i)}}},[e._v("视图")])]}},{key:"action",fn:function(t){return[a("b-button",{attrs:{type:"text"},on:{click:function(a){return e.handleModify(t.row)}}},[e._v("编辑")]),[a("b-divider",{attrs:{type:"vertical"}}),a("b-button",{attrs:{type:"text","text-color":"danger"},on:{click:function(a){return e.handleRemove(t.row)}}},[e._v("删除")])]]}}])}),a("b-page",{attrs:{total:e.total,"show-sizer":""},on:{"on-change":e.handleCurrentChange,"on-page-size-change":e.handleSizeChange}})],1)],1),a("fm-container",{ref:"fmContainer",attrs:{status:e.formStatus},on:{"on-save":e.handleSave}}),a("view-config",{ref:"viewConfig",on:{"on-close":e.handleCancel}})],1)},l=[],o=a("344a"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("transition",{attrs:{name:"move-right"}},[e.visible?a("div",{staticClass:"fm-container"},[a("div",{staticClass:"fm-header"},[a("div",{staticClass:"title"},[a("span",{staticClass:"logo"},[e._v("F")]),e._v("\n          "+e._s(e.topTitle)+"\n          "),e.isEdit?a("b-icon",{staticStyle:{"margin-left":"8px"},attrs:{name:"ios-radio-button-on",color:"#fea638",size:"14"}}):e._e()],1),a("div",{staticClass:"right"},[a("b-icon",{attrs:{name:"close"},nativeOn:{click:function(t){return e.close(t)}}})],1)]),a("div",{staticClass:"fm-content"},[a("div",{staticClass:"components-list"},[a("b-scrollbar",{staticStyle:{height:"100%"}},[e.basicFields.length?[a("div",{staticClass:"widget-cate"},[e._v("基础字段")]),a("draggable",e._b({attrs:{tag:"ul",list:e.basicComponents,move:e.handleMove}},"draggable",{group:{name:"form",pull:"clone",put:!1},sort:!1,ghostClass:"ghost"},!1),[e._l(e.basicComponents,(function(t,i){return[e.basicFields.indexOf(t.type)>=0?a("li",{key:i,staticClass:"form-edit-widget-label",class:{"no-put":"divider"===t.type},on:{click:function(a){return e.handleAddWidget(t)}}},[a("a",[a("b-icon",{attrs:{name:t.icon}}),a("span",[e._v(e._s(t.name))])],1)]):e._e()]}))],2)]:e._e(),e.layoutFields.length?[a("div",{staticClass:"widget-cate"},[e._v("布局控件")]),a("draggable",e._b({attrs:{tag:"ul",list:e.layoutComponents,move:e.handleMove}},"draggable",{group:{name:"form",pull:"clone",put:!1},sort:!1,ghostClass:"ghost"},!1),[e._l(e.layoutComponents,(function(t,i){return[e.layoutFields.indexOf(t.type)>=0?a("li",{key:i,staticClass:"form-edit-widget-label no-put",on:{click:function(a){return e.handleAddWidget(t)}}},[a("a",[a("b-icon",{attrs:{name:t.icon}}),a("span",[e._v(e._s(t.name))])],1)]):e._e()]}))],2)]:e._e()],2)],1),a("div",{staticClass:"center-container"},[a("div",{staticClass:"top-fix"},[a("b-button",{attrs:{type:"text"},on:{click:e.handlePreview}},[a("b-icon",{attrs:{name:"ios-eye"}}),e._v(" 预览\n            ")],1),a("b-button",{attrs:{type:"text"},on:{click:e.handleShowJson}},[a("b-icon",{attrs:{name:"ios-paper"}}),e._v(" 编辑JSON\n            ")],1),a("b-button",{attrs:{type:"text"},on:{click:e.handleSave}},[a("b-icon",{attrs:{name:"ios-save"}}),e._v(" 保存\n            ")],1),a("b-button",{attrs:{type:"text","text-color":"danger"},on:{click:e.handleClear}},[a("b-icon",{attrs:{name:"ios-trash"}}),e._v(" 清空\n            ")],1)],1),a("div",{staticClass:"scroll-content"},[a("b-scrollbar",{staticStyle:{height:"100%"}},[a("widget-form",{ref:"widgetForm",attrs:{data:e.widgetForm,select:e.widgetFormSelect},on:{"update:select":function(t){e.widgetFormSelect=t}}})],1)],1)]),a("div",{staticClass:"right-config-container"},[a("div",{staticClass:"top-fix"},e._l(e.tabs,(function(t){return a("div",{key:t.key,staticClass:"tab-item",class:{active:t.key===e.activeTab},on:{click:function(a){e.activeTab=t.key}}},[e._v("\n              "+e._s(t.title)+"\n            ")])})),0),a("div",{staticClass:"config-content"},[a("b-scrollbar",{staticStyle:{height:"100%"}},[a("widget-config",{directives:[{name:"show",rawName:"v-show",value:"widget"===e.activeTab,expression:"activeTab==='widget'"}],attrs:{data:e.widgetFormSelect}}),a("form-config",{directives:[{name:"show",rawName:"v-show",value:"form"===e.activeTab,expression:"activeTab==='form'"}],ref:"formConfig",attrs:{data:e.widgetForm.config}})],1)],1)])])]):e._e()]),a("b-modal",{attrs:{title:"编辑JSON",width:"800px","stop-remove-scroll":""},model:{value:e.jsonModal,callback:function(t){e.jsonModal=t},expression:"jsonModal"}},[e.jsonModal?a("div",[a("b-ace-editor",{attrs:{height:"400",width:"752",snippets:!1},model:{value:e.jsonOptions,callback:function(t){e.jsonOptions=t},expression:"jsonOptions"}})],1):e._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("b-button",{on:{click:function(t){e.jsonModal=!1}}},[e._v("取消")]),a("b-button",{attrs:{type:"primary"},on:{click:function(t){return e.jsonChange(e.jsonOptions)}}},[e._v("确定")])],1)]),a("form-preview",{ref:"formPreview"}),a("b-modal",{attrs:{"footer-hide":"","mask-closable":!1,width:"400",styles:{top:"200px"},"stop-remove-scroll":""},model:{value:e.closeModal,callback:function(t){e.closeModal=t},expression:"closeModal"}},[a("div",{attrs:{flex:"main:justify"}},[a("b-icon",{staticStyle:{"padding-top":"6px"},attrs:{name:"ios-warning",size:"60",color:"#fea638"}}),a("div",{staticStyle:{width:"280px"}},[a("div",{staticStyle:{padding:"4px 16px",color:"rgba(0,0,0,.85)"}},[e._v("\n          是否保存对当前表单的操作？\n        ")]),a("div",{staticStyle:{padding:"8px 16px 0"},attrs:{flex:"main:justify"}},[a("b-button",{attrs:{size:"small"},on:{click:function(t){return e.closeSave(!1)}}},[e._v("不保存")]),a("div",[a("b-button",{attrs:{size:"small"},on:{click:function(t){e.closeModal=!1}}},[e._v("取 消")]),a("b-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.closeSave(!0)}}},[e._v("保 存")])],1)],1)])],1)])],1)},s=[],r=a("a34a"),d=a.n(r),u=a("310e"),c=a.n(u),p=a("fd03"),m=a("212a"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"widget-form-container"},[0===e.data.list.length?a("b-empty",{staticClass:"form-empty"},[e._v("从左侧拖拽或点击来添加字段")]):e._e(),a("b-form",{ref:"form",attrs:{"label-position":e.data.config.labelPosition,"label-width":e.data.config.labelWidth,size:e.data.config.size}},[a("draggable",e._b({on:{end:e.handleMoveEnd,add:e.handleWidgetAdd},model:{value:e.data.list,callback:function(t){e.$set(e.data,"list",t)},expression:"data.list"}},"draggable",{group:"form",ghostClass:"ghost",animation:200,handle:".drag-widget"},!1),[a("transition-group",{staticClass:"widget-form-list",attrs:{name:"fade",tag:"div"}},[e._l(e.data.list,(function(t,i){return["grid"===t.type?[t&&t.key?a("div",{key:t.key,staticClass:"widget-col widget-view",class:{active:e.selectWidget.key===t.key},on:{click:function(t){return e.handleSelectWidget(i)}}},[a("b-row",{attrs:{type:"flex",gutter:t.options.gutter,justify:t.options.justify,align:t.options.align}},e._l(t.columns,(function(i,l){return a("b-col",{key:l,attrs:{span:i.span?i.span:0}},[a("draggable",e._b({attrs:{"no-transition-on-drag":!0},on:{end:e.handleMoveEnd,add:function(a){return e.handleWidgetColAdd(a,t,l)}},model:{value:i.list,callback:function(t){e.$set(i,"list",t)},expression:"col.list"}},"draggable",{group:"form",ghostClass:"ghost",animation:200,handle:".drag-widget"},!1),[a("transition-group",{staticClass:"widget-col-list",attrs:{name:"fade",tag:"div"}},[e._l(i.list,(function(t,l){return[t.key?a("widget-form-item",{key:t.key,attrs:{element:t,select:e.selectWidget,index:l,data:i},on:{"update:select":function(t){e.selectWidget=t}}}):e._e()]}))],2)],1)],1)})),1),e.selectWidget.key===t.key?a("div",{staticClass:"widget-view-action widget-col-action"},[a("i",{staticClass:"iconfont icon-ios-trash",attrs:{title:"删除"},on:{click:function(t){return t.stopPropagation(),e.handleWidgetDelete(i)}}})]):e._e(),e.selectWidget.key===t.key?a("div",{staticClass:"widget-view-drag widget-col-drag"},[a("i",{staticClass:"iconfont icon-ios-move drag-widget"})]):e._e()],1):e._e()]:"divider"===t.type?[t&&t.key?a("div",{key:t.key,staticClass:"widget-col widget-view",class:{active:e.selectWidget.key===t.key},on:{click:function(t){return e.handleSelectWidget(i)}}},[t.options.simple?e._e():a("b-divider",{style:{margin:t.options.margin},attrs:{align:t.options.align,dashed:t.options.dashed}},[e._v("\n                "+e._s(t.name)+"\n              ")]),e.selectWidget.key===t.key?a("div",{staticClass:"widget-view-action widget-col-action"},[a("i",{staticClass:"iconfont icon-ios-trash",attrs:{title:"删除"},on:{click:function(t){return t.stopPropagation(),e.handleWidgetDelete(i)}}})]):e._e(),e.selectWidget.key===t.key?a("div",{staticClass:"widget-view-drag widget-col-drag"},[a("i",{staticClass:"iconfont icon-ios-move drag-widget"})]):e._e()],1):e._e()]:[t&&t.key?a("widget-form-item",{key:t.key,attrs:{element:t,select:e.selectWidget,index:i,data:e.data},on:{"update:select":function(t){e.selectWidget=t}}}):e._e()]]}))],2)],1)],1)],1)},f=[],g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.element&&e.element.key?a("b-form-item",{staticClass:"widget-view ",class:{active:e.selectWidget.key===e.element.key,"bin-form-item-required":e.element.options.required},attrs:{label:e.element.name},nativeOn:{click:function(t){return t.stopPropagation(),e.handleSelectWidget(e.index)}}},["input"===e.element.type?[a("b-input",{style:{width:e.element.options.width},attrs:{placeholder:e.element.options.placeholder,disabled:e.element.options.disabled,clearable:e.element.options.clearable,size:e.size,maxlength:e.element.options.length,"show-word-count":e.element.options.showWordCount},model:{value:e.element.options.defaultValue,callback:function(t){e.$set(e.element.options,"defaultValue",t)},expression:"element.options.defaultValue"}})]:e._e(),"textarea"===e.element.type?[a("b-input",{style:{width:e.element.options.width},attrs:{type:"textarea",rows:3,placeholder:e.element.options.placeholder,disabled:e.element.options.disabled,maxlength:e.element.options.length,"show-word-count":e.element.options.showWordCount},model:{value:e.element.options.defaultValue,callback:function(t){e.$set(e.element.options,"defaultValue",t)},expression:"element.options.defaultValue"}})]:e._e(),"number"===e.element.type?[a("b-input-number",{style:{width:e.element.options.width},attrs:{disabled:e.element.options.disabled,min:e.element.options.min,max:e.element.options.max,step:e.element.options.step,precision:e.element.options.precision,size:e.size},model:{value:e.element.options.defaultValue,callback:function(t){e.$set(e.element.options,"defaultValue",t)},expression:"element.options.defaultValue"}})]:e._e(),"radio"===e.element.type?[a("b-radio-group",{style:{width:e.element.options.width},attrs:{disabled:e.element.options.disabled,type:e.element.options.buttonModel?"button":null,size:e.size},model:{value:e.element.options.defaultValue,callback:function(t){e.$set(e.element.options,"defaultValue",t)},expression:"element.options.defaultValue"}},e._l(e.element.options.options,(function(t,i){return a("b-radio",{key:t.value+i,style:e.element.options.buttonModel?null:e.blockStyle,attrs:{label:t.value}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),1)]:e._e(),"checkbox"===e.element.type?[a("b-checkbox-group",{style:{width:e.element.options.width},attrs:{value:e.splitValue(e.element.options.defaultValue)},on:{"on-change":function(t){e.element.options.defaultValue=e.joinValue(t)}}},e._l(e.element.options.options,(function(t,i){return a("b-checkbox",{key:t.value+i,style:e.blockStyle,attrs:{label:t.value,disabled:e.element.options.disabled}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),1)]:e._e(),"select"===e.element.type?[e.element.options.multiple?a("b-select",{key:"2",style:{width:e.element.options.width},attrs:{value:e.splitValue(e.element.options.defaultValue),disabled:e.element.options.disabled,multiple:e.element.options.multiple,clearable:e.element.options.clearable,filterable:e.element.options.filterable,placeholder:e.element.options.placeholder,"max-tag-count":e.element.options.maxTagCount,size:e.size},on:{"on-change":function(t){e.element.options.defaultValue=e.joinValue(t)}}},e._l(e.element.options.options,(function(e){return a("b-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1):a("b-select",{key:"1",style:{width:e.element.options.width},attrs:{disabled:e.element.options.disabled,clearable:e.element.options.clearable,filterable:e.element.options.filterable,placeholder:e.element.options.placeholder,size:e.size},model:{value:e.element.options.defaultValue,callback:function(t){e.$set(e.element.options,"defaultValue",t)},expression:"element.options.defaultValue"}},e._l(e.element.options.options,(function(e){return a("b-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)]:e._e(),"time"===e.element.type?[a("b-time-picker",{style:{width:e.element.options.width},attrs:{type:e.element.options.isRange?"timerange":"time",placeholder:e.element.options.placeholder,readonly:e.element.options.readonly,disabled:e.element.options.disabled,editable:e.element.options.editable,clearable:e.element.options.clearable,format:e.element.options.format,size:e.size},model:{value:e.element.options.defaultValue,callback:function(t){e.$set(e.element.options,"defaultValue",t)},expression:"element.options.defaultValue"}})]:e._e(),"date"===e.element.type?[a("b-date-picker",{style:{width:e.element.options.width},attrs:{value:e.element.options.defaultValue,type:e.element.options.type,placeholder:e.element.options.placeholder,readonly:e.element.options.readonly,disabled:e.element.options.disabled,editable:e.element.options.editable,clearable:e.element.options.clearable,format:e.element.options.format,size:e.size,separator:" ~ "},on:{"on-change":function(t){e.element.options.defaultValue=t}}})]:e._e(),"switch"===e.element.type?[a("label",{style:{lineHeight:e.sizeHeightMap[e.size]}},[a("b-switch",{attrs:{disabled:e.element.options.disabled,size:e.element.options.size,"true-value":e.element.options.trueValue,"false-value":e.element.options.falseValue,"active-color":e.element.options.activeColor,"inactive-color":e.element.options.inactiveColor},model:{value:e.element.options.defaultValue,callback:function(t){e.$set(e.element.options,"defaultValue",t)},expression:"element.options.defaultValue"}},[e.element.options.openText?a("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.element.options.openText))]):e._e(),e.element.options.closeText?a("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.element.options.closeText))]):e._e()])],1)]:e._e(),"color"===e.element.type?[a("b-color-picker",{attrs:{disabled:e.element.options.disabled,alpha:e.element.options.alpha,recommend:e.element.options.recommend,size:e.size},model:{value:e.element.options.defaultValue,callback:function(t){e.$set(e.element.options,"defaultValue",t)},expression:"element.options.defaultValue"}})]:e._e(),"rate"===e.element.type?[a("div",{style:{height:e.sizeHeightMap[e.size]},attrs:{flex:"cross:center"}},[a("b-rate",{attrs:{max:e.element.options.max,disabled:e.element.options.disabled,"allow-half":e.element.options.allowHalf,"show-score":e.element.options.showScore},model:{value:e.element.options.defaultValue,callback:function(t){e.$set(e.element.options,"defaultValue",t)},expression:"element.options.defaultValue"}}),e.element.options.clearable?a("b-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"}},[e._v("清空")]):e._e()],1)]:e._e(),"slider"===e.element.type?[a("div",{staticStyle:{padding:"0 4px"}},[a("b-slider",{style:{width:e.element.options.width},attrs:{min:e.element.options.min,max:e.element.options.max,disabled:e.element.options.disabled,step:e.element.options.step,"show-input":e.element.options.showInput,range:e.element.options.range,"input-size":e.size},model:{value:e.element.options.defaultValue,callback:function(t){e.$set(e.element.options,"defaultValue",t)},expression:"element.options.defaultValue"}})],1)]:e._e(),e.selectWidget.key===e.element.key?a("div",{staticClass:"widget-view-action"},[a("i",{staticClass:"iconfont icon-ios-copy",attrs:{title:"复制"},on:{click:function(t){return t.stopPropagation(),e.handleWidgetClone(e.index)}}}),a("i",{staticClass:"iconfont icon-ios-trash",attrs:{title:"删除"},on:{click:function(t){return t.stopPropagation(),e.handleWidgetDelete(e.index)}}})]):e._e(),e.selectWidget.key===e.element.key?a("div",{staticClass:"widget-view-drag"},[a("i",{staticClass:"iconfont icon-ios-move drag-widget"})]):e._e(),a("div",{staticClass:"widget-view-field-name",style:{color:e.repeatModel.indexOf(e.element.model)>=0?"#ff4d4f":"#52c41a"}},[a("span",{attrs:{draggable:"true"},on:{dragstart:function(t){return e.onDrag(t,e.element.model)}}},[e._v(e._s(e.element.model))])])],2):e._e()},h=[],v=a("a33f");function y(e){var t=Date.now()+"_"+Math.ceil(99999*Math.random());return e?e+"_"+t:t}function w(e){var t=Date.now();return e?e+"_"+t:t}function x(e){return 0===e.length?[]:e.split(",")}function k(e){return Object(m["c"])(e)?e.join(","):""}var _={$required:function(e){return{required:!0,message:e.message,trigger:e.trigger,type:e.type}},$length:function(e){return{min:e.min,max:e.max,message:e.message,trigger:e.trigger,type:e.type}},$email:function(e){return{type:"email",message:e.message,trigger:e.trigger}},$phone:function(e){return{pattern:/^((0\d{2,3}-\d{7,8})|(1[35874]\d{9}))$/,message:e.message,trigger:e.trigger}},$idCode:function(e,t){return t?{validator:function(a,i,l){var o=t[e.preField],n=Object(m["c"])(e.preField)&&"N1"!==o,s=e.ignoreCase?String(i).toUpperCase():i,r=Object(m["b"])(i)||n||Object(v["a"])(s);r||l(new Error(e.message)),l()},trigger:e.trigger}:null},$regexp:function(e){return{pattern:new RegExp(e.regexp),message:e.message,trigger:e.trigger}},$conditionRequired:function(e,t){return t?{validator:function(a,i,l){var o=t[e.preField],n=e.preFieldValue;(Object(m["b"])(o)&&Object(m["b"])(n)||o===n||Object(m["b"])(n)&&o.toString()===n||Object(m["c"])(n)&&o.toString().includes(n))&&Object(m["b"])(i)&&l(new Error(e.message)),l()},trigger:e.trigger}:null},$conditionNotRequired:function(e,t){return t?{validator:function(a,i,l){var o=t[e.preField],n=e.preFieldValue;console.log(e.preField+":"+o),console.log(o.toString()===n,o.toString().includes(n)),(Object(m["b"])(o)&&Object(m["b"])(n)||o===n||Object(m["b"])(n)&&o.toString()===n||Object(m["c"])(n)&&o.toString().includes(n))&&Object(m["c"])(i)&&l(new Error(e.message)),l()},trigger:e.trigger}:null},$conditionNotBe:function(e,t){return t?{validator:function(a,i,l){var o=t[e.preField],n=e.preFieldValue;(o===n||Object(m["b"])(n)&&o.toString()===n||Object(m["c"])(n)&&o.toString().includes(n))&&(i!==e.notValue&&i.toString()!==e.notValue||l(new Error(e.message))),l()},trigger:e.trigger}:null},$notSame:function(e,t){return t?{validator:function(a,i,l){var o=t[e.preField];(o&&o.toString()===i||o===i)&&l(new Error(e.message)),l()},trigger:e.trigger}:null},$timeBound:function(e,t){return t?{validator:function(a,i,l){if(Object(m["b"])(i))l();else{var o;if("$now"===e.time)o=new Date;else if(Object(v["b"])(e.time))o=new Date(e.time.replace(/-/g,"/"));else{var n=t[e.time];o=Object(v["b"])(n)?new Date(n.replace(/-/g,"/")):null}var s=e.compareMode,r=new Date(i.replace(/-/g,"/")),d=!0;if(o)switch(s){case"gt":d=r>o;break;case"ge":d=r>=o;break;case"lt":d=r<o;break;case"le":d=r<=o;break}d||l(new Error(e.message)),l()}},trigger:e.trigger}:null}};function C(e,t){return e.map((function(e){return _[e.name](e,t)}))}function $(e){var t=[],a=function(e){for(var i=0;i<e.length;i++)"grid"===e[i].type&&e[i].columns.forEach((function(e){a(e.list)})),["grid","divider"].indexOf(e[i].type)<0&&t.push(e[i])};return a(e),a=null,t}var V={name:"WidgetFormItem",props:["element","select","index","data"],inject:["ConfigRoot"],data:function(){return{selectWidget:this.select,sizeHeightMap:{large:"42px",default:"32px",small:"28px",mini:"24px"}}},computed:{size:function(){return this.ConfigRoot.widgetForm.config.size},blockStyle:function(){return{display:this.element.options.inline?"inline-block":"block",paddingTop:this.element.options.inline?"0":"4px"}},repeatModel:function(){return this.ConfigRoot.repeatModels}},methods:{onDrag:function(e,t){e.dataTransfer.setData("index",t)},handleSelectWidget:function(e){this.selectWidget=this.data.list[e],this.ConfigRoot.activeTab="widget"},handleWidgetDelete:function(e){var t=this;this.data.list.length-1===e?this.selectWidget=0===e?{}:this.data.list[e-1]:this.selectWidget=this.data.list[e+1],this.$nextTick((function(){t.data.list.splice(e,1)}))},handleWidgetClone:function(e){var t=this,a=this.cloneObjAndExtend(this.data.list[e]);this.data.list.splice(e,0,a),this.$nextTick((function(){t.selectWidget=t.data.list[e+1]}))},cloneObjAndExtend:function(e){var t=Object(m["a"])(e);return t.key=y(),t.model=w(t.type),t.rules=[],t},splitValue:function(e){return x(e)},joinValue:function(e){return k(e)}},watch:{select:function(e){this.selectWidget=e},selectWidget:{handler:function(e){this.$emit("update:select",e)},deep:!0}}},O=V,S=a("2877"),z=Object(S["a"])(O,g,h,!1,null,null,null),F=z.exports,j={name:"WidgetForm",components:{WidgetFormItem:F,Draggable:c.a},props:["data","select"],data:function(){return{selectWidget:this.select}},mounted:function(){document.body.ondrop=function(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;t&&(e.preventDefault(),e.stopPropagation())}},methods:{handleMoveEnd:function(e){var t=e.newIndex,a=e.oldIndex;console.log("index",t,a)},handleSelectWidget:function(e){console.log(e,"#####"),this.selectWidget=this.data.list[e]},handleWidgetAdd:function(e){var t=e.newIndex,a=this.cloneObjAndExtend(this.data.list[t]);this.$set(this.data.list,t,a),this.selectWidget=this.data.list[t]},handleWidgetColAdd:function(e,t,a){console.log("col add",e,t,a);var i=e.newIndex,l=e.oldIndex,o=e.item;if(console.log("from",o),o.className.indexOf("no-put")>=0)return"DIV"===o.tagName&&this.data.list.splice(l,0,t.columns[a].list[i]),t.columns[a].list.splice(i,1),console.log("不能嵌套布局"),!1;var n=this.cloneObjAndExtend(t.columns[a].list[i]);this.$set(t.columns[a].list,i,n),this.selectWidget=t.columns[a].list[i]},handleWidgetDelete:function(e){var t=this;this.data.list.length-1===e?this.selectWidget=0===e?{}:this.data.list[e-1]:this.selectWidget=this.data.list[e+1],this.$nextTick((function(){t.data.list.splice(e,1)}))},cloneObjAndExtend:function(e){var t=Object(m["a"])(e);return t.key=y(),t.model=w(t.type),t.rules=[],t}},watch:{select:function(e){this.selectWidget=e},selectWidget:{handler:function(e){this.$emit("update:select",e)},deep:!0}}},M=j,W=Object(S["a"])(M,b,f,!1,null,null,null),T=W.exports,P=[{type:"input",name:"单行文本",icon:"ios-create",length:64,precision:0,dataType:"string",options:{width:"100%",defaultValue:"",required:!1,placeholder:"",disabled:!1,length:null,showWordCount:!1,clearable:!1}},{type:"textarea",name:"多行文本",icon:"ios-paper",length:200,precision:0,dataType:"text",options:{width:"100%",defaultValue:"",required:!1,disabled:!1,placeholder:"",length:null,showWordCount:!1}},{type:"number",name:"计数器",icon:"ios-calculator",length:24,precision:0,dataType:"number",options:{width:"",required:!1,defaultValue:null,min:0,max:1e3,step:1,precision:0,disabled:!1}},{type:"radio",name:"单选框组",icon:"ios-radio-button-on",length:20,precision:0,dataType:"string",options:{inline:!0,defaultValue:"",options:[{value:"Option 1",label:"选项一"},{value:"Option 2",label:"选项二"},{value:"Option 3",label:"选项三"}],required:!1,width:"",disabled:!1,buttonModel:!1}},{type:"checkbox",name:"多选框组",icon:"ios-checkbox-outline",length:64,precision:0,dataType:"string",options:{inline:!0,defaultValue:"",options:[{value:"Option 1",label:"选项一"},{value:"Option 2",label:"选项二"},{value:"Option 3",label:"选项三"}],required:!1,width:"",disabled:!1}},{type:"select",name:"下拉选择框",icon:"ios-arrow-dropdown",length:64,precision:0,dataType:"string",options:{defaultValue:"",multiple:!1,maxTagCount:2,disabled:!1,clearable:!1,placeholder:"",required:!1,width:"200px",options:[{value:"Option 1",label:"选项一"},{value:"Option 2",label:"选项二"},{value:"Option 3",label:"选项三"}],filterable:!1}},{type:"time",icon:"ios-timer",name:"时间选择器",length:20,precision:0,dataType:"string",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!0,clearable:!0,placeholder:"",isRange:!1,format:"HH:mm:ss",required:!1,width:"200px"}},{type:"date",name:"日期选择器",icon:"ios-calendar",length:20,precision:0,options:{defaultValue:"",readonly:!1,disabled:!1,editable:!0,clearable:!0,placeholder:"",type:"date",format:"yyyy-MM-dd",required:!1,width:"200px"}},{type:"switch",name:"开关",icon:"ios-switch",length:4,precision:0,dataType:"bool",options:{defaultValue:!1,required:!1,disabled:!1,size:"default",openText:"",closeText:""}},{type:"color",name:"颜色选择器",icon:"ios-color-palette",length:64,precision:0,dataType:"string",options:{defaultValue:"",disabled:!1,alpha:!1,required:!1,recommend:!1}},{type:"rate",name:"评分",icon:"favor",length:24,precision:0,dataType:"number",options:{defaultValue:null,max:5,disabled:!1,allowHalf:!1,required:!1,showScore:!1,clearable:!1}},{type:"slider",name:"滑块",icon:"ios-options",length:64,precision:0,dataType:"number",options:{defaultValue:0,disabled:!1,required:!1,min:0,max:100,step:1,showInput:!1,width:""}}],q=[{type:"grid",name:"栅格布局",icon:"ios-grid",columns:[{span:12,list:[]},{span:12,list:[]}],options:{gutter:8,justify:"start",align:"top"}},{type:"divider",name:"分割线",icon:"ios-remove",options:{align:"left",margin:"24px 0",dashed:!1}}],D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"form-config-container"},[a("b-form",{ref:"formConfig",attrs:{model:e.data,size:"small","label-width":80,rules:e.rules,"label-position":"left"}},[a("cfg-group",{attrs:{"group-name":"单据属性"}},[a("div",{staticClass:"form-config-item"},[a("b-form-item",{attrs:{label:"单据名称",prop:"formName"}},[a("b-input",{attrs:{size:"small",clearable:""},model:{value:e.data.formName,callback:function(t){e.$set(e.data,"formName",t)},expression:"data.formName"}})],1),a("b-form-item",{attrs:{label:"单据编码",prop:"formCode"}},[a("b-input",{attrs:{size:"small",clearable:""},model:{value:e.data.formCode,callback:function(t){e.$set(e.data,"formCode",t)},expression:"data.formCode"}})],1),a("b-form-item",{attrs:{label:"单据类型",prop:"formType"}},[a("b-radio-group",{attrs:{type:"button",size:"small"},model:{value:e.data.formType,callback:function(t){e.$set(e.data,"formType",t)},expression:"data.formType"}},[a("b-radio",{attrs:{label:"base"}},[e._v("基础单据")]),a("b-radio",{attrs:{label:"data"}},[e._v("数据单据")])],1)],1),a("b-form-item",{attrs:{label:"单据表名",prop:"formTable"}},[a("b-input",{attrs:{size:"small",clearable:""},model:{value:e.data.formTable,callback:function(t){e.$set(e.data,"formTable",t)},expression:"data.formTable"}})],1),a("b-form-item",{attrs:{label:"单据描述",prop:"formDesc"}},[a("b-input",{attrs:{size:"small",clearable:""},model:{value:e.data.formDesc,callback:function(t){e.$set(e.data,"formDesc",t)},expression:"data.formDesc"}})],1)],1)]),a("cfg-group",{attrs:{"group-name":"表单样式"}},[a("div",{staticClass:"form-config-item"},[a("b-form-item",{attrs:{label:"标签对齐"}},[a("b-radio-group",{attrs:{size:"small",type:"button"},model:{value:e.data.labelPosition,callback:function(t){e.$set(e.data,"labelPosition",t)},expression:"data.labelPosition"}},[a("b-radio",{attrs:{label:"left"}},[e._v("左对齐")]),a("b-radio",{attrs:{label:"right"}},[e._v("右对齐")]),a("b-radio",{attrs:{label:"top"}},[e._v("顶部对齐")])],1)],1),a("b-form-item",{attrs:{label:"标签宽度"}},[a("b-input-number",{attrs:{min:60,max:200,step:5,size:"small"},model:{value:e.data.labelWidth,callback:function(t){e.$set(e.data,"labelWidth",t)},expression:"data.labelWidth"}})],1),a("b-form-item",{attrs:{label:"组件尺寸"}},[a("b-radio-group",{attrs:{size:"small",type:"button"},model:{value:e.data.size,callback:function(t){e.$set(e.data,"size",t)},expression:"data.size"}},[a("b-radio",{attrs:{label:"large"}},[e._v("大号")]),a("b-radio",{attrs:{label:"default"}},[e._v("默认")]),a("b-radio",{attrs:{label:"small"}},[e._v("小号")])],1)],1)],1)])],1)],1):e._e()},N=[],E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gui-group"},[a("div",{staticClass:"gui-group-name"},[a("span",[e._v(e._s(e.groupName))])]),a("div",{staticClass:"gui-group-content"},[e._t("default")],2)])},R=[],I={name:"CfgGroup",props:{groupName:String}},B=I,A=(a("41bf"),Object(S["a"])(B,E,R,!1,null,"1799c49e",null)),H=A.exports,L={name:"FormConfig",components:{CfgGroup:H},props:["data"],data:function(){return{rules:{formName:[{required:!0,message:"单据名称必填",trigger:"blur"}],formCode:[{required:!0,message:"单据编码必填",trigger:"blur"}],formType:[{required:!0,message:"单据类型必选",trigger:"change"}],formTable:[{required:!0,message:"单据表名必填",trigger:"blur"}],formDesc:[{required:!0,message:"单据描述必填",trigger:"blur"}]}}},methods:{validatorForm:function(){var e=this;return new Promise((function(t){e.$refs.formConfig.validate((function(e){t(e)}))}))}},computed:{show:function(){return!!(this.data&&Object.keys(this.data).length>0)}}},J=L,Q=Object(S["a"])(J,D,N,!1,null,null,null),G=Q.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"widget-config-container"},[a("b-form",{attrs:{model:e.data,size:"small","label-position":"top"}},["grid"!==e.data.type&&"divider"!==e.data.type?a("cfg-group",{attrs:{"group-name":"字段属性"}},[a("div",{staticClass:"form-config-item"},[a("b-form-item",{staticClass:"bin-form-item-required",attrs:{label:"字段名称",prop:"model"}},[a("b-input",{attrs:{size:"small",clearable:""},on:{"on-blur":e.checkModel},model:{value:e.data.model,callback:function(t){e.$set(e.data,"model",t)},expression:"data.model"}})],1),a("b-form-item",{staticClass:"bin-form-item-required",attrs:{label:"控件标题",prop:"name"}},[a("b-input",{attrs:{size:"small",clearable:""},on:{"on-blur":e.checkName},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}})],1),a("b-row",{attrs:{gutter:10}},[a("b-col",{attrs:{span:"12"}},[a("b-form-item",{attrs:{label:"数据长度",prop:"length"}},[a("b-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:0},model:{value:e.data.length,callback:function(t){e.$set(e.data,"length",t)},expression:"data.length"}})],1)],1),a("b-col",{attrs:{span:"12"}},[a("b-form-item",{attrs:{label:"数据精度",prop:"precision"}},[a("b-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:0},model:{value:e.data.precision,callback:function(t){e.$set(e.data,"precision",t)},expression:"data.precision"}})],1)],1)],1)],1)]):e._e(),a("cfg-group",{attrs:{"group-name":"控件属性"}},[e.hasProperty("width")?a("cfg-field",{attrs:{label:"控件宽度"}},[a("b-input",{attrs:{size:"small",placeholder:"支持百分比(%)和像素(px)",clearable:""},model:{value:e.data.options.width,callback:function(t){e.$set(e.data.options,"width",t)},expression:"data.options.width"}})],1):e._e(),e.hasProperty("length")?a("cfg-field",{attrs:{label:"文本长度"}},[a("b-input-number",{attrs:{size:"small",max:e.data.length},model:{value:e.data.options.length,callback:function(t){e.$set(e.data.options,"length",t)},expression:"data.options.length"}})],1):e._e(),e.hasProperty("precision")?a("cfg-field",{attrs:{label:"数值精度"}},[a("b-input-number",{attrs:{size:"small",max:e.data.precision},model:{value:e.data.options.precision,callback:function(t){e.$set(e.data.options,"precision",t)},expression:"data.options.precision"}})],1):e._e(),e.hasProperty("min")?a("cfg-field",{attrs:{label:"最小值"}},[a("b-input-number",{attrs:{size:"small"},model:{value:e.data.options.min,callback:function(t){e.$set(e.data.options,"min",t)},expression:"data.options.min"}})],1):e._e(),e.hasProperty("max")?a("cfg-field",{attrs:{label:"最大值"}},[a("b-input-number",{attrs:{size:"small"},model:{value:e.data.options.max,callback:function(t){e.$set(e.data.options,"max",t)},expression:"data.options.max"}})],1):e._e(),e.hasProperty("step")?a("cfg-field",{attrs:{label:"步长"}},[a("b-input-number",{attrs:{size:"small",min:1},model:{value:e.data.options.step,callback:function(t){e.$set(e.data.options,"step",t)},expression:"data.options.step"}})],1):e._e(),e.hasProperty("inline")?a("cfg-field",{attrs:{label:"布局方式"}},[a("b-button-group",[a("b-button",{attrs:{type:!0===e.data.options.inline?"primary":"default",size:"small"},on:{click:function(t){e.data.options.inline=!0}}},[e._v("行内\n          ")]),a("b-button",{attrs:{type:!1===e.data.options.inline?"primary":"default",size:"small"},on:{click:function(t){e.data.options.inline=!1}}},[e._v("块级\n          ")])],1)],1):e._e(),e.hasProperty("buttonModel")?a("cfg-field",{attrs:{label:"按钮模式"}},[a("b-switch",{model:{value:e.data.options.buttonModel,callback:function(t){e.$set(e.data.options,"buttonModel",t)},expression:"data.options.buttonModel"}})],1):e._e(),e.hasProperty("size")?a("cfg-field",{attrs:{label:"大小"}},[a("b-radio-group",{attrs:{size:"small",type:"button"},model:{value:e.data.options.size,callback:function(t){e.$set(e.data.options,"size",t)},expression:"data.options.size"}},[a("b-radio",{attrs:{label:"large"}},[e._v("大号")]),a("b-radio",{attrs:{label:"default"}},[e._v("默认")]),a("b-radio",{attrs:{label:"small"}},[e._v("小号")])],1)],1):e._e(),e.hasProperty("openText")&&e.hasProperty("closeText")?a("cfg-field",{attrs:{label:"开关文字"}},[a("cfg-inline",{attrs:{label:"open"}},[a("b-input",{attrs:{size:"small",clearable:""},model:{value:e.data.options.openText,callback:function(t){e.$set(e.data.options,"openText",t)},expression:"data.options.openText"}})],1),a("cfg-inline",{attrs:{label:"close"}},[a("b-input",{attrs:{size:"small",clearable:""},model:{value:e.data.options.closeText,callback:function(t){e.$set(e.data.options,"closeText",t)},expression:"data.options.closeText"}})],1)],1):e._e(),e.hasProperty("format")?a("cfg-field",{attrs:{label:"格式"}},[a("b-input",{attrs:{size:"small",clearable:""},model:{value:e.data.options.format,callback:function(t){e.$set(e.data.options,"format",t)},expression:"data.options.format"}}),a("b-button",{staticStyle:{"margin-left":"-1px"},attrs:{size:"small"},on:{click:function(t){e.data.options.format="time"===e.data.type?"HH:mm:ss":"yyyy-MM-dd"}}},[e._v("\n          复位\n        ")])],1):e._e(),e.hasProperty("placeholder")?a("cfg-field",{attrs:{label:"占位内容"}},[a("b-input",{attrs:{size:"small",clearable:""},model:{value:e.data.options.placeholder,callback:function(t){e.$set(e.data.options,"placeholder",t)},expression:"data.options.placeholder"}})],1):e._e(),e.hasProperty("type")?a("cfg-field",{attrs:{label:"显示类型"}},[a("b-radio-group",{attrs:{size:"small",type:"button"},model:{value:e.data.options.type,callback:function(t){e.$set(e.data.options,"type",t)},expression:"data.options.type"}},[a("b-radio",{attrs:{label:"date"}},[e._v("date")]),a("b-radio",{attrs:{label:"datetime"}},[e._v("datetime")])],1)],1):e._e(),e.hasProperty("defaultValue")&&!e.hasOptions?a("cfg-field",{attrs:{label:"默认值"}},["input"===e.data.type?a("b-input",{attrs:{size:"small",clearable:e.data.options.clearable},model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}}):e._e(),"textarea"===e.data.type?a("b-input",{attrs:{type:"textarea",rows:3,"show-word-count":""},model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}}):e._e(),"number"===e.data.type?a("b-input-number",{attrs:{size:"small",precision:e.data.options.precision,step:e.data.options.step},model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}}):e._e(),"switch"===e.data.type?a("b-switch",{model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}}):e._e(),"color"===e.data.type?[a("b-color-picker",{attrs:{recommend:"",size:"small",alpha:e.data.options.alpha,placement:"bottom-start"},model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}}),a("b-input",{attrs:{size:"small",readonly:"",clearable:""},model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}})]:e._e(),"rate"===e.data.type?[a("b-rate",{attrs:{max:e.data.options.max,"allow-half":e.data.options.allowHalf},model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}}),a("b-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(t){e.data.options.defaultValue=0}}},[e._v("清空")])]:e._e(),"slider"===e.data.type?a("b-slider",{staticStyle:{width:"280px"},attrs:{range:e.data.options.range,step:e.data.options.step},model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}}):e._e(),"time"===e.data.type?[e.data.options.isRange?e._e():a("b-time-picker",{key:"1",staticStyle:{width:"100%"},attrs:{size:"small","value-format":e.data.options.format,clearable:e.data.options.clearable},model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}}),e.data.options.isRange?a("b-time-picker",{key:"2",staticStyle:{width:"100%"},attrs:{size:"small",type:e.data.options.isRange?"timerange":"time","value-format":e.data.options.format,clearable:e.data.options.clearable},model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}}):e._e()]:e._e(),"date"===e.data.type?a("b-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",value:e.data.options.defaultValue,type:e.data.options.type,placeholder:e.data.options.placeholder,clearable:e.data.options.clearable,format:e.data.options.format},on:{"on-change":function(t){e.data.options.defaultValue=t}}}):e._e()],2):e._e(),e.hasProperty("maxTagCount")?a("cfg-field",{attrs:{label:"最大标签"}},[a("b-input-number",{attrs:{size:"small",min:1,max:3,disabled:!e.data.options.multiple},model:{value:e.data.options.maxTagCount,callback:function(t){e.$set(e.data.options,"maxTagCount",t)},expression:"data.options.maxTagCount"}})],1):e._e(),e.hasProperty("options")?a("div",{staticClass:"form-config-item"},[a("b-divider",{staticStyle:{margin:"16px 0"}}),a("b-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"选项"}},["radio"===e.data.type||"select"===e.data.type&&!e.data.options.multiple?[a("b-radio-group",{model:{value:e.data.options.defaultValue,callback:function(t){e.$set(e.data.options,"defaultValue",t)},expression:"data.options.defaultValue"}},[a("draggable",e._b({attrs:{tag:"ul",list:e.data.options.options}},"draggable",{group:{name:"options"},animation:200,ghostClass:"ghost",handle:".drag-item"},!1),e._l(e.data.options.options,(function(t,i){return a("li",{key:i,staticClass:"drag-li"},[a("b-radio",{key:t.value,staticStyle:{"margin-right":"0"},attrs:{label:t.value}},[a("span")]),a("b-input",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"value",title:"value",clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),a("b-input",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"label",title:"label",clearable:""},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}}),a("i",{staticClass:"drag-item iconfont icon-ios-menu",staticStyle:{"font-size":"20px",margin:"0 5px",cursor:"move"}}),a("b-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"text","text-color":"danger"},on:{click:function(t){return e.handleOptionsRemove(i)}}},[a("b-icon",{attrs:{name:"ios-remove-circle-outline",size:20}})],1)],1)})),0)],1)]:e._e(),"checkbox"===e.data.type||"select"===e.data.type&&e.data.options.multiple?[a("b-checkbox-group",{attrs:{value:e.splitValue(e.data.options.defaultValue)},on:{"on-change":function(t){e.data.options.defaultValue=e.joinValue(t)}}},[a("draggable",e._b({attrs:{tag:"ul",list:e.data.options.options}},"draggable",{group:{name:"options"},animation:200,ghostClass:"ghost",handle:".drag-item"},!1),e._l(e.data.options.options,(function(t,i){return a("li",{key:i,staticClass:"drag-li"},[a("b-checkbox",{key:t.value,staticStyle:{"margin-right":"0",width:"auto"},attrs:{label:t.value}},[a("span")]),a("b-input",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"value",title:"value",clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),a("b-input",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"label",title:"label",clearable:""},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}}),a("i",{staticClass:"drag-item iconfont icon-ios-menu",staticStyle:{"font-size":"20px",margin:"0 5px",cursor:"move"}}),a("b-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"text","text-color":"danger"},on:{click:function(t){return e.handleOptionsRemove(i)}}},[a("b-icon",{attrs:{name:"ios-remove-circle-outline",size:20}})],1)],1)})),0)],1)]:e._e(),a("div",{staticStyle:{margin:"4px 0 0 28px"}},[a("b-button",{attrs:{type:"text"},on:{click:e.handleAddOption}},[e._v("添加项")]),a("b-button",{attrs:{type:"text"},on:{click:function(t){e.data.options.defaultValue=""}}},[e._v("重置选择")])],1)],2)],1):e._e(),"grid"===e.data.type?[a("div",{staticClass:"form-config-item"},[e.hasProperty("gutter")?a("b-form-item",{attrs:{label:"栅格间隔"}},[a("b-input-number",{attrs:{min:4,step:2,max:24,size:"small"},model:{value:e.data.options.gutter,callback:function(t){e.$set(e.data.options,"gutter",t)},expression:"data.options.gutter"}}),a("b-button-group",{staticStyle:{"margin-left":"16px"}},[a("b-button",{attrs:{type:8===e.data.options.gutter?"primary":"default",size:"small"},on:{click:function(t){e.data.options.gutter=8}}},[e._v("8\n              ")]),a("b-button",{attrs:{type:16===e.data.options.gutter?"primary":"default",size:"small"},on:{click:function(t){e.data.options.gutter=16}}},[e._v("16\n              ")]),a("b-button",{attrs:{type:24===e.data.options.gutter?"primary":"default",size:"small"},on:{click:function(t){e.data.options.gutter=24}}},[e._v("24\n              ")])],1)],1):e._e(),a("b-divider",{staticStyle:{margin:"16px 0"}}),a("b-form-item",{attrs:{label:"列配置项"}},[a("b-button-group",{staticStyle:{"margin-bottom":"4px"}},[a("b-button",{attrs:{type:2===e.data.columns.length?"primary":"default",size:"small"},on:{click:function(t){return e.changeCol(2)}}},[e._v("2列\n              ")]),a("b-button",{attrs:{type:3===e.data.columns.length?"primary":"default",size:"small"},on:{click:function(t){return e.changeCol(3)}}},[e._v("3列\n              ")]),a("b-button",{attrs:{type:4===e.data.columns.length?"primary":"default",size:"small"},on:{click:function(t){return e.changeCol(4)}}},[e._v("4列\n              ")])],1),a("draggable",e._b({attrs:{tag:"ul",list:e.data.columns}},"draggable",{group:{name:"options"},ghostClass:"ghost",animation:200,handle:".drag-item"},!1),e._l(e.data.columns,(function(t,i){return a("li",{key:i,staticClass:"drag-li"},[a("i",{staticClass:"drag-item iconfont icon-ios-menu",staticStyle:{"font-size":"20px",margin:"0 5px",cursor:"move"}}),a("b-input-number",{attrs:{size:"small"},model:{value:t.span,callback:function(a){e.$set(t,"span",a)},expression:"item.span"}}),a("b-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"text","text-color":"danger"},on:{click:function(t){return e.handleOptionsRemove(i)}}},[a("b-icon",{attrs:{name:"ios-remove-circle-outline",size:20}})],1)],1)})),0),a("div",{staticStyle:{margin:"4px 0 0 28px"}},[a("b-button",{attrs:{type:"text"},on:{click:e.handleAddColumn}},[e._v("添加列")])],1)],1),a("b-divider",{staticStyle:{margin:"16px 0"}})],1),a("cfg-field",{attrs:{label:"对齐方式"}},[e.hasProperty("justify")?a("cfg-inline",{attrs:{label:"水平排列方式"}},[a("b-select",{attrs:{size:"small"},model:{value:e.data.options.justify,callback:function(t){e.$set(e.data.options,"justify",t)},expression:"data.options.justify"}},e._l(e.justifyOptions,(function(t){return a("b-option",{key:t.value,attrs:{value:t.value}},[e._v("\n                "+e._s(t.label)+"\n              ")])})),1)],1):e._e(),e.hasProperty("align")?a("cfg-inline",{attrs:{label:"竖直排列方式"}},[a("b-select",{attrs:{size:"small"},model:{value:e.data.options.align,callback:function(t){e.$set(e.data.options,"align",t)},expression:"data.options.align"}},e._l(e.alignOptions,(function(t){return a("b-option",{key:t.value,attrs:{value:t.value}},[e._v("\n                "+e._s(t.label)+"\n              ")])})),1)],1):e._e()],1)]:e._e(),"divider"===e.data.type?[a("div",{staticClass:"form-config-item"},[a("b-form-item",{attrs:{label:"标题",prop:"name"}},[a("b-input",{attrs:{size:"small",clearable:""},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}})],1),e.hasProperty("align")?a("b-form-item",{attrs:{label:"标题位置"}},[a("b-radio-group",{attrs:{size:"small",type:"button"},model:{value:e.data.options.align,callback:function(t){e.$set(e.data.options,"align",t)},expression:"data.options.align"}},[a("b-radio",{attrs:{label:"left"}},[e._v("左侧")]),a("b-radio",{attrs:{label:"center"}},[e._v("居中")]),a("b-radio",{attrs:{label:"right"}},[e._v("右侧")])],1)],1):e._e(),e.hasProperty("margin")?a("b-form-item",{attrs:{label:"线间距"}},[a("b-input",{attrs:{size:"small"},model:{value:e.data.options.margin,callback:function(t){e.$set(e.data.options,"margin",t)},expression:"data.options.margin"}})],1):e._e(),e.hasProperty("dashed")?a("b-form-item",{attrs:{label:"是否虚线"}},[a("b-switch",{model:{value:e.data.options.dashed,callback:function(t){e.$set(e.data.options,"dashed",t)},expression:"data.options.dashed"}})],1):e._e()],1)]:e._e(),"grid"!==e.data.type&&"divider"!==e.data.type?[a("div",{staticClass:"form-config-item"},[a("b-divider",{staticStyle:{margin:"16px 0"}}),a("b-form-item",{attrs:{label:"操作属性"}},[e.hasProperty("readonly")?a("b-checkbox",{model:{value:e.data.options.readonly,callback:function(t){e.$set(e.data.options,"readonly",t)},expression:"data.options.readonly"}},[e._v("完全只读")]):e._e(),e.hasProperty("disabled")?a("b-checkbox",{model:{value:e.data.options.disabled,callback:function(t){e.$set(e.data.options,"disabled",t)},expression:"data.options.disabled"}},[e._v("禁用")]):e._e(),e.hasProperty("showWordCount")?a("b-checkbox",{model:{value:e.data.options.showWordCount,callback:function(t){e.$set(e.data.options,"showWordCount",t)},expression:"data.options.showWordCount"}},[e._v("字数统计")]):e._e(),e.hasProperty("alpha")?a("b-checkbox",{model:{value:e.data.options.alpha,callback:function(t){e.$set(e.data.options,"alpha",t)},expression:"data.options.alpha"}},[e._v("透明度")]):e._e(),e.hasProperty("recommend")?a("b-checkbox",{model:{value:e.data.options.recommend,callback:function(t){e.$set(e.data.options,"recommend",t)},expression:"data.options.recommend"}},[e._v("颜色预设")]):e._e(),e.hasProperty("allowHalf")?a("b-checkbox",{model:{value:e.data.options.allowHalf,callback:function(t){e.$set(e.data.options,"allowHalf",t)},expression:"data.options.allowHalf"}},[e._v("允许半选")]):e._e(),e.hasProperty("showScore")?a("b-checkbox",{model:{value:e.data.options.showScore,callback:function(t){e.$set(e.data.options,"showScore",t)},expression:"data.options.showScore"}},[e._v("显示分数")]):e._e(),e.hasProperty("showInput")?a("b-checkbox",{model:{value:e.data.options.showInput,callback:function(t){e.$set(e.data.options,"showInput",t)},expression:"data.options.showInput"}},[e._v("允许输入")]):e._e(),"time"===e.data.type||"date"===e.data.type?[e.hasProperty("isRange")?a("b-checkbox",{model:{value:e.data.options.isRange,callback:function(t){e.$set(e.data.options,"isRange",t)},expression:"data.options.isRange"}},[e._v("是否范围选择")]):e._e()]:e._e(),e.hasProperty("multiple")?a("b-checkbox",{on:{"on-change":e.handleSelectMultiple},model:{value:e.data.options.multiple,callback:function(t){e.$set(e.data.options,"multiple",t)},expression:"data.options.multiple"}},[e._v("\n              是否可多选\n            ")]):e._e(),e.hasProperty("filterable")?a("b-checkbox",{model:{value:e.data.options.filterable,callback:function(t){e.$set(e.data.options,"filterable",t)},expression:"data.options.filterable"}},[e._v("是否可搜索")]):e._e(),e.hasProperty("editable")?a("b-checkbox",{model:{value:e.data.options.editable,callback:function(t){e.$set(e.data.options,"editable",t)},expression:"data.options.editable"}},[e._v("文本框可输入")]):e._e(),e.hasProperty("clearable")?a("b-checkbox",{model:{value:e.data.options.clearable,callback:function(t){e.$set(e.data.options,"clearable",t)},expression:"data.options.clearable"}},[e._v("显示清除按钮")]):e._e()],2),a("b-divider",{staticStyle:{margin:"16px 0"}}),a("rules-setting",{attrs:{data:e.data}})],1)]:e._e()],2)],1),a("div",[a("b-divider",{attrs:{align:"left"}},[e._v("data")]),a("b-ace-editor",{attrs:{value:JSON.stringify(e.data,null,2),readonly:""}})],1)],1):a("div",{staticStyle:{position:"relative"}},[a("b-empty",{staticClass:"form-empty"},[e._v("请添加字段")])],1)},K=[],U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gui-field"},[e.label?a("div",{staticClass:"gui-field-name",style:e.labelStyle},[e._v(e._s(e.label)),a("span")]):e._e(),a("div",{staticClass:"gui-field-container",style:e.contentStyle},[e._t("default")],2)])},Y=[],Z={name:"CfgField",props:{label:String,labelWidth:{type:String},labelPosition:{type:String,default:"left"}},computed:{labelStyle:function(){return{width:this.labelWidth,textAlign:this.labelPosition}},contentStyle:function(){return{width:this.labelWidth?"calc(100% - ".concat(this.labelWidth,")"):null}}}},ee=Z,te=(a("fcfa"),Object(S["a"])(ee,U,Y,!1,null,"eb339052",null)),ae=te.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gui-inline"},[e._t("default"),a("div",{staticClass:"label"},[e._v(e._s(e.label))])],2)},le=[],oe={name:"CfgInline",props:{label:String}},ne=oe,se=(a("1830"),Object(S["a"])(ne,ie,le,!1,null,"04338712",null)),re=se.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-form-item",{attrs:{label:"校验"}},[a("div",{staticClass:"validate-block"},[a("div",{staticClass:"rules-actions"},[e.hasProperty("required")?a("b-checkbox",{staticStyle:{width:"auto"},on:{"on-change":e.requiredChange},model:{value:e.data.options.required,callback:function(t){e.$set(e.data.options,"required",t)},expression:"data.options.required"}},[e._v("\n        必填\n      ")]):e._e(),a("b-dropdown",{on:{"on-click":e.setRules}},[a("b-button",{attrs:{type:"text"}},[e._v("\n          静态规则\n          "),a("b-icon",{attrs:{name:"ios-arrow-down"}})],1),a("b-dropdown-menu",{attrs:{slot:"list"},slot:"list"},[a("b-dropdown-item",{attrs:{name:"$length"}},[e._v("长度")]),a("b-dropdown-item",{attrs:{name:"$email"}},[e._v("邮箱")]),a("b-dropdown-item",{attrs:{name:"$phone"}},[e._v("手机号码")]),a("b-dropdown-item",{attrs:{name:"$idCode"}},[e._v("身份证号")]),a("b-dropdown-item",{attrs:{name:"$regexp"}},[e._v("正则匹配")])],1)],1),a("b-divider",{attrs:{type:"vertical"}}),a("b-dropdown",{on:{"on-click":e.setRules}},[a("b-button",{attrs:{type:"text"}},[e._v("\n          动态规则\n          "),a("b-icon",{attrs:{name:"ios-arrow-down"}})],1),a("b-dropdown-menu",{attrs:{slot:"list"},slot:"list"},[a("b-dropdown-item",{attrs:{name:"$conditionRequired"}},[e._v("条件必填")]),a("b-dropdown-item",{attrs:{name:"$conditionNotRequired"}},[e._v("条件必不填")]),a("b-dropdown-item",{attrs:{name:"$conditionNotBe"}},[e._v("条件不为某值")]),a("b-dropdown-item",{attrs:{name:"$notSame"}},[e._v("值不等于")]),a("b-dropdown-item",{attrs:{name:"$timeBound"}},[e._v("日期区间")])],1)],1),a("b-divider",{attrs:{type:"vertical"}}),a("b-button",{attrs:{type:"text"},on:{click:e.clearRules}},[e._v("清除校验")])],1),e.data.options.required?a("rules-label",{attrs:{label:"自定义错误提示",type:"message-input"}},[a("b-input",{attrs:{size:"small",placeholder:"请输入错误提示",clearable:""},model:{value:e.data.rules[0].message,callback:function(t){e.$set(e.data.rules[0],"message","string"===typeof t?t.trim():t)},expression:"data.rules[0].message"}})],1):e._e()],1),a("draggable",e._b({staticClass:"validate-block",attrs:{tag:"div",list:e.data.rules}},"draggable",{group:"rules",ghostClass:"ghost",handle:".drag-item",animation:200},!1),[e._l(e.data.rules,(function(t,i){return["$required"!==t.name?a("div",{key:i,staticClass:"rules-item drag-li"},[a("div",{staticClass:"title-wrap"},[a("div",{staticClass:"title-label"},[a("i",{staticClass:"drag-item iconfont icon-ios-options"}),e._v("\n            "+e._s(e.ruleNameMap[t.name])+"\n          ")]),a("b-button",{attrs:{type:"text","text-color":"danger"},on:{click:function(t){return e.removeRules(i)}}},[a("b-icon",{attrs:{name:"ios-remove-circle-outline",size:20}})],1)],1),a("div",{staticClass:"params"},["$length"===t.name?a("div",{staticClass:"info"},[a("rules-label",{attrs:{label:"最小值",type:"inline"}},[a("b-input-number",{attrs:{size:"small"},model:{value:e.data.rules[i].min,callback:function(t){e.$set(e.data.rules[i],"min",t)},expression:"data.rules[index].min"}})],1),a("rules-label",{attrs:{label:"最大值",type:"inline"}},[a("b-input-number",{attrs:{size:"small"},model:{value:e.data.rules[i].max,callback:function(t){e.$set(e.data.rules[i],"max",t)},expression:"data.rules[index].max"}})],1)],1):e._e(),"$idCode"===t.name?a("div",{staticClass:"info"},[a("rules-label",{attrs:{label:"前置字段",type:"inline"}},[a("b-input",{attrs:{size:"small",placeholder:"前置字段"},nativeOn:{drop:function(t){return e.onDrop(t,i)},dragover:function(t){return e.allowDrop(t)}},model:{value:e.data.rules[i].preField,callback:function(t){e.$set(e.data.rules[i],"preField",t)},expression:"data.rules[index].preField"}})],1),a("rules-label",{attrs:{label:"忽略大小写",type:"inline"}},[a("b-switch",{attrs:{size:"small"},model:{value:e.data.rules[i].ignoreCase,callback:function(t){e.$set(e.data.rules[i],"ignoreCase",t)},expression:"data.rules[index].ignoreCase"}})],1)],1):e._e(),"$regexp"===t.name?a("rules-label",{attrs:{label:"正则规则",type:"message-input"}},[a("b-input",{attrs:{size:"small",placeholder:"正则规则(字符格式)"},model:{value:e.data.rules[i].regexp,callback:function(t){e.$set(e.data.rules[i],"regexp",t)},expression:"data.rules[index].regexp"}})],1):e._e(),"$conditionRequired"===t.name||"$conditionNotRequired"===t.name?a("div",{staticClass:"info"},[a("rules-label",{attrs:{label:"前置字段",type:"inline"}},[a("b-input",{attrs:{size:"small"},nativeOn:{drop:function(t){return e.onDrop(t,i)},dragover:function(t){return e.allowDrop(t)}},model:{value:e.data.rules[i].preField,callback:function(t){e.$set(e.data.rules[i],"preField","string"===typeof t?t.trim():t)},expression:"data.rules[index].preField"}})],1),a("rules-label",{attrs:{label:"前置字段值",type:"inline"}},[a("b-input",{attrs:{size:"small"},model:{value:e.data.rules[i].preFieldValue,callback:function(t){e.$set(e.data.rules[i],"preFieldValue","string"===typeof t?t.trim():t)},expression:"data.rules[index].preFieldValue"}})],1)],1):e._e(),"$conditionNotBe"===t.name?a("div",{staticClass:"info"},[a("rules-label",{attrs:{label:"前置字段",type:"inline"}},[a("b-input",{attrs:{size:"small"},nativeOn:{drop:function(t){return e.onDrop(t,i)},dragover:function(t){return e.allowDrop(t)}},model:{value:e.data.rules[i].preField,callback:function(t){e.$set(e.data.rules[i],"preField","string"===typeof t?t.trim():t)},expression:"data.rules[index].preField"}})],1),a("rules-label",{attrs:{label:"前置字段值",type:"inline"}},[a("b-input",{attrs:{size:"small"},model:{value:e.data.rules[i].preFieldValue,callback:function(t){e.$set(e.data.rules[i],"preFieldValue","string"===typeof t?t.trim():t)},expression:"data.rules[index].preFieldValue"}})],1),a("rules-label",{attrs:{label:"不是某值",type:"inline"}},[a("b-input",{attrs:{size:"small"},model:{value:e.data.rules[i].notValue,callback:function(t){e.$set(e.data.rules[i],"notValue","string"===typeof t?t.trim():t)},expression:"data.rules[index].notValue"}})],1)],1):e._e(),"$notSame"===t.name?a("div",{staticClass:"info"},[a("rules-label",{attrs:{label:"前置字段",type:"inline"}},[a("b-input",{attrs:{size:"small"},nativeOn:{drop:function(t){return e.onDrop(t,i)},dragover:function(t){return e.allowDrop(t)}},model:{value:e.data.rules[i].preField,callback:function(t){e.$set(e.data.rules[i],"preField","string"===typeof t?t.trim():t)},expression:"data.rules[index].preField"}})],1)],1):e._e(),"$timeBound"===t.name?a("div",{staticClass:"info"},[a("rules-label",{attrs:{label:"比较模式",type:"inline",tip:"当前输入值在前"}},[a("b-select",{staticStyle:{width:"88px"},attrs:{size:"small"},model:{value:e.data.rules[i].compareMode,callback:function(t){e.$set(e.data.rules[i],"compareMode",t)},expression:"data.rules[index].compareMode"}},[a("b-option",{attrs:{value:"gt"}},[e._v(">")]),a("b-option",{attrs:{value:"ge"}},[e._v("≥")]),a("b-option",{attrs:{value:"lt"}},[e._v("<")]),a("b-option",{attrs:{value:"le"}},[e._v("≤")])],1)],1),a("rules-label",{attrs:{label:"比较对象",type:"inline",tip:"输入$now、yyyy-MM-dd或字段名"}},[a("div",{attrs:{flex:""}},[a("b-input",{attrs:{size:"small"},nativeOn:{drop:function(t){return e.onDrop(t,i)},dragover:function(t){return e.allowDrop(t)}},model:{value:e.data.rules[i].time,callback:function(t){e.$set(e.data.rules[i],"time","string"===typeof t?t.trim():t)},expression:"data.rules[index].time"}}),a("b-button",{staticStyle:{"margin-left":"-1px"},attrs:{size:"small"},on:{click:function(t){e.data.rules[i].time="$now"}}},[e._v("此刻")])],1)])],1):e._e(),a("rules-label",{attrs:{label:"自定义错误提示",type:"message-input"}},[a("b-input",{attrs:{size:"small",placeholder:"请输入错误提示",clearable:""},model:{value:e.data.rules[i].message,callback:function(t){e.$set(e.data.rules[i],"message","string"===typeof t?t.trim():t)},expression:"data.rules[index].message"}})],1)],1)]):e._e()]}))],2)],1)},ue=[],ce=function(e,t){var a=t._c;return a("div",{class:t.props.type},[a("div",{staticClass:"input-label"},[t._v("\n    "+t._s(t.props.label)+"\n    "),t.props.tip?a("b-tooltip",{attrs:{content:t.props.tip}},[a("b-icon",{staticStyle:{"vertical-align":"-1px"},attrs:{name:"ios-help-circle-outline"}})],1):t._e()],1),t._t("default")],2)},pe=[],me={},be=Object(S["a"])(me,ce,pe,!0,null,null,null),fe=be.exports;function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach((function(t){ve(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ye={name:"RulesSetting",components:{RulesLabel:fe,Draggable:c.a},props:["data"],data:function(){return{ruleNameMap:{$required:"必填项",$length:"长度参数",$email:"邮箱参数",$phone:"手机号码",$idCode:"身份证",$regexp:"正则匹配",$conditionRequired:"条件必填",$conditionNotRequired:"条件必不填",$conditionNotBe:"条件不为某值",$notSame:"值不能相同",$timeBound:"日期区间"}}},computed:{dataOptions:function(){return Object.keys(this.data.options)},normalCfg:function(){return{type:["number","rate","slider"].indexOf(this.data.type)>-1?"number":"string",trigger:["input","textarea"].indexOf(this.data.type)>-1?"blur":"change"}}},methods:{requiredChange:function(e){e?this.data.rules.unshift(he({name:"$required",message:"".concat(this.data.name,"必填")},this.normalCfg)):this.data.rules.shift()},setRules:function(e){if(this.hasSame(e))this.$message({type:"warning",content:"已有同名规则，无需重复添加"});else switch(e){case"$length":this.data.rules.push(he({name:e,min:0,max:100,message:"长度必须在指定的范围内"},this.normalCfg));break;case"$email":this.data.rules.push(he({name:e,message:"邮箱格式不正确"},this.normalCfg));break;case"$phone":this.data.rules.push(he({name:e,message:"手机号格式不正确"},this.normalCfg));break;case"$idCode":this.data.rules.push(he({name:e,preField:"",message:"身份证格式不正确",ignoreCase:!0},this.normalCfg));break;case"$regexp":this.data.rules.push(he({name:e,regexp:"",message:"正则表达式不匹配"},this.normalCfg));break;case"$conditionRequired":this.data.rules.push(he({name:e,preField:"",preFieldValue:"",message:"当前字段在前置字段条件达成下必填"},this.normalCfg));break;case"$conditionNotRequired":this.data.rules.push(he({name:e,preField:"",preFieldValue:"",message:"当前字段在前置字段条件达成下不可填写"},this.normalCfg));break;case"$conditionNotBe":this.data.rules.push(he({name:e,preField:"",preFieldValue:"",notValue:"",message:"当前字段在前置字段条件达成下不能为某值"},this.normalCfg));break;case"$notSame":this.data.rules.push(he({name:e,preField:"",message:"不能和前置字段值相同"},this.normalCfg));break;case"$timeBound":this.data.rules.push(he({name:e,time:"$now",compareMode:"gt",message:"日期不符合区间设置"},this.normalCfg));break;default:break}},hasSame:function(e){var t=["$regexp","$conditionRequired","$conditionNotRequired","$conditionNotBe","$notSame","$timeBound"];return!(t.indexOf(e)>-1)&&this.data.rules.findIndex((function(t){return t.name===e}))>=0},clearRules:function(){this.data.options.required=!1,this.data.rules=[]},removeRules:function(e){this.data.rules.splice(e,1)},hasProperty:function(e){return this.dataOptions.indexOf(e)>=0},allowDrop:function(e){e.preventDefault()},onDrop:function(e,t){this.data.rules[t].hasOwnProperty("preField")&&(this.data.rules[t].preField=e.dataTransfer.getData("index")),this.data.rules[t].hasOwnProperty("time")&&(this.data.rules[t].time=e.dataTransfer.getData("index")),e.preventDefault()}}},we=ye,xe=Object(S["a"])(we,de,ue,!1,null,null,null),ke=xe.exports,_e={name:"WidgetConfig",components:{RulesSetting:ke,CfgInline:re,CfgField:ae,CfgGroup:H,Draggable:c.a},props:["data"],inject:["ConfigRoot"],data:function(){return{justifyOptions:[{value:"start",label:"左对齐"},{value:"end",label:"右对齐"},{value:"center",label:"居中"},{value:"space-between",label:"两端对齐"},{value:"space-around",label:"两侧间隔相等"}],alignOptions:[{value:"top",label:"顶部对齐"},{value:"bottom",label:"底部对齐"},{value:"middle",label:"居中对齐"}],fieldNames:[]}},computed:{show:function(){return!!(this.data&&Object.keys(this.data).length>0)},dataOptions:function(){return Object.keys(this.data.options)},hasOptions:function(){return["radio","checkbox","select"].indexOf(this.data.type)>=0}},methods:{handleAddOption:function(){var e=this.data.options.options.length+1;this.data.options.options.push({value:"Option "+e,label:"Option "+e})},handleAddColumn:function(){this.data.columns.push({span:null,list:[]})},changeCol:function(e){var t=Object(m["a"])(this.data.columns);this.data.columns=[];for(var a=0;a<e;a++)this.data.columns.push({span:24/e,list:t[a]?t[a].list:[]})},handleOptionsRemove:function(e){"grid"===this.data.type?this.data.columns.splice(e,1):this.data.options.options.splice(e,1)},handleSelectMultiple:function(e){this.data.options.defaultValue=""},hasProperty:function(e){return this.dataOptions.indexOf(e)>=0},checkModel:function(){if(0!==this.data.model.length){var e=this.ConfigRoot.repeatModels;e.indexOf(this.data.model)>=0&&this.$message({type:"danger",content:"当前字段名称 { ".concat(this.data.model," } 重复")})}else this.$message({type:"danger",content:"字段名称必填"})},checkName:function(){0===this.data.name.length&&this.$message({type:"danger",content:"控件标题必填"})},splitValue:function(e){return x(e)},joinValue:function(e){return k(e)}}},Ce=_e,$e=Object(S["a"])(Ce,X,K,!1,null,null,null),Ve=$e.exports,Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-modal",{attrs:{title:"表单预览",fullscreen:"",width:"100%","stop-remove-scroll":""},model:{value:e.previewModal,callback:function(t){e.previewModal=t},expression:"previewModal"}},[e.previewModal?a("generate-form",{ref:"generateForm",attrs:{data:e.widgetForm}}):e._e(),a("b-modal",{attrs:{title:"数据结果","footer-hide":"","stop-remove-scroll":"","body-styles":{padding:"16px"}},model:{value:e.modelDialog,callback:function(t){e.modelDialog=t},expression:"modelDialog"}},[a("div",{staticStyle:{height:"350px"}},[a("b-ace-editor",{attrs:{value:e.submitResult,readonly:""}})],1)]),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("b-button",{attrs:{type:"primary"},on:{click:e.formSubmit}},[e._v("获取数据")]),a("b-button",{on:{click:e.formReset}},[e._v("重 置")]),a("b-button",{on:{click:function(t){e.previewModal=!1}}},[e._v("关 闭")])],1)],1)],1)},Se=[],ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fm-style"},[a("b-form",{ref:"generateForm",attrs:{model:e.models,rules:e.rules,"label-position":e.data.config.labelPosition,"label-width":e.data.config.labelWidth,size:e.data.config.size}},[e._l(e.data.list,(function(t){return["grid"===t.type?[a("b-row",{key:t.key,attrs:{type:"flex",gutter:t.options.gutter,justify:t.options.justify,align:t.options.align}},e._l(t.columns,(function(t,i){return a("b-col",{key:i,attrs:{span:t.span}},[e._l(t.list,(function(t){return[a("generate-form-item",{key:t.key,attrs:{"form-config":e.data.config,widget:t},on:{"input-change":e.onInputChange},model:{value:e.models[t.model],callback:function(a){e.$set(e.models,t.model,a)},expression:"models[el.model]"}})]}))],2)})),1)]:"divider"===t.type?[t.options.simple?e._e():a("b-divider",{key:t.key,style:{margin:t.options.margin},attrs:{align:t.options.align,dashed:t.options.dashed}},[e._v("\n          "+e._s(t.name)+"\n        ")])]:[a("generate-form-item",{key:t.key,attrs:{"form-config":e.data.config,widget:t},on:{"input-change":e.onInputChange},model:{value:e.models[t.model],callback:function(a){e.$set(e.models,t.model,a)},expression:"models[element.model]"}})]]}))],2)],1)},Fe=[],je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-form-item",{attrs:{label:e.widget.name,prop:e.widget.model}},["input"===e.widget.type?[a("b-input",{style:{width:e.widget.options.width},attrs:{placeholder:e.widget.options.placeholder,disabled:e.widget.options.disabled,clearable:e.widget.options.clearable,size:e.size,maxlength:e.widget.options.length,"show-word-count":e.widget.options.showWordCount},on:{"on-change":e.handleInputEvent},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})]:e._e(),"textarea"===e.widget.type?[a("b-input",{style:{width:e.widget.options.width},attrs:{type:"textarea",rows:3,placeholder:e.widget.options.placeholder,disabled:e.widget.options.disabled,maxlength:e.widget.options.length,"show-word-count":e.widget.options.showWordCount},on:{"on-change":e.handleInputEvent},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})]:e._e(),"number"===e.widget.type?[a("b-input-number",{style:{width:e.widget.options.width},attrs:{disabled:e.widget.options.disabled,min:e.widget.options.min,max:e.widget.options.max,step:e.widget.options.step,precision:e.widget.options.precision,size:e.size},on:{"on-change":e.handleInput},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})]:e._e(),"radio"===e.widget.type?[a("b-radio-group",{style:{width:e.widget.options.width},attrs:{disabled:e.widget.options.disabled,type:e.widget.options.buttonModel?"button":null,size:e.size},on:{"on-change":e.handleInput},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},e._l(e.widget.options.options,(function(t,i){return a("b-radio",{key:t.value+i,style:e.widget.options.buttonModel?null:e.blockStyle,attrs:{label:t.value}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),1)]:e._e(),"checkbox"===e.widget.type?[a("b-checkbox-group",{style:{width:e.widget.options.width},attrs:{value:e.splitValue(e.currentValue)},on:{"on-change":e.handleInputMultiple}},e._l(e.widget.options.options,(function(t,i){return a("b-checkbox",{key:t.value+i,style:{display:e.widget.options.inline?"inline-block":"block",paddingTop:e.widget.options.inline?"0":"4px"},attrs:{disabled:e.widget.options.disabled,label:t.value}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),1)]:e._e(),"select"===e.widget.type?[e.widget.options.multiple?a("b-select",{key:"2",style:{width:e.widget.options.width},attrs:{value:e.splitValue(e.currentValue),disabled:e.widget.options.disabled,multiple:e.widget.options.multiple,clearable:e.widget.options.clearable,filterable:e.widget.options.filterable,placeholder:e.widget.options.placeholder,"max-tag-count":e.widget.options.maxTagCount,size:e.size},on:{"on-change":e.handleInputMultiple}},e._l(e.widget.options.options,(function(e){return a("b-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1):a("b-select",{key:"1",style:{width:e.widget.options.width},attrs:{disabled:e.widget.options.disabled,clearable:e.widget.options.clearable,filterable:e.widget.options.filterable,placeholder:e.widget.options.placeholder,size:e.size},on:{"on-change":e.handleInput},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},e._l(e.widget.options.options,(function(e){return a("b-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)]:e._e(),"time"===e.widget.type?[a("b-time-picker",{style:{width:e.widget.options.width},attrs:{type:e.widget.options.isRange?"timerange":"time",placeholder:e.widget.options.placeholder,readonly:e.widget.options.readonly,disabled:e.widget.options.disabled,editable:e.widget.options.editable,clearable:e.widget.options.clearable,format:e.widget.options.format,size:e.size},on:{"on-change":e.handleInput},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})]:e._e(),"date"===e.widget.type?[a("b-date-picker",{style:{width:e.widget.options.width},attrs:{value:e.currentValue,type:e.widget.options.type,placeholder:e.widget.options.placeholder,readonly:e.widget.options.readonly,disabled:e.widget.options.disabled,editable:e.widget.options.editable,clearable:e.widget.options.clearable,format:e.widget.options.format,size:e.size,separator:" ~ "},on:{"on-change":e.handleInput}})]:e._e(),"switch"===e.widget.type?[a("label",{style:{lineHeight:e.sizeHeightMap[e.size]}},[a("b-switch",{attrs:{disabled:e.widget.options.disabled,size:e.widget.options.size,"true-value":e.widget.options.trueValue,"false-value":e.widget.options.falseValue,"active-color":e.widget.options.activeColor,"inactive-color":e.widget.options.inactiveColor},on:{"on-change":e.handleInput},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},[e.widget.options.openText?a("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.widget.options.openText))]):e._e(),e.widget.options.closeText?a("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.widget.options.closeText))]):e._e()])],1)]:e._e(),"color"===e.widget.type?[a("b-color-picker",{attrs:{disabled:e.widget.options.disabled,alpha:e.widget.options.alpha,recommend:e.widget.options.recommend,size:e.size},on:{"on-change":e.handleInput},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})]:e._e(),"rate"===e.widget.type?[a("div",{style:{height:e.sizeHeightMap[e.size]},attrs:{flex:"cross:center"}},[a("b-rate",{attrs:{max:e.widget.options.max,disabled:e.widget.options.disabled,"allow-half":e.widget.options.allowHalf,"show-score":e.widget.options.showScore},on:{"on-change":e.handleInput},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}}),e.widget.options.clearable?a("b-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(t){return e.handleInput(0)}}},[e._v("清空\n      ")]):e._e()],1)]:e._e(),"slider"===e.widget.type?[a("b-slider",{style:{width:e.widget.options.width},attrs:{min:e.widget.options.min,max:e.widget.options.max,disabled:e.widget.options.disabled,step:e.widget.options.step,"show-input":e.widget.options.showInput,range:e.widget.options.range,"input-size":e.size},on:{"on-change":e.handleInput},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})]:e._e()],2)},Me=[],We={name:"GenerateFormItem",props:["widget","value","formConfig"],computed:{size:function(){return this.formConfig.size},blockStyle:function(){return{display:this.widget.options.inline?"inline-block":"block",paddingTop:this.widget.options.inline?"0":"4px"}}},data:function(){return{currentValue:this.value,sizeHeightMap:{large:"42px",default:"32px",small:"28px",mini:"24px"}}},methods:{handleInputEvent:function(e){this.handleInput(e.target.value)},handleInput:function(e){this.currentValue=e,this.$emit("input",this.currentValue),this.$emit("input-change",this.currentValue,this.widget.model)},handleInputMultiple:function(e){this.currentValue=k(e),this.$emit("input",this.currentValue),this.$emit("input-change",this.currentValue,this.widget.model)},splitValue:function(e){return x(e)}},watch:{value:{handler:function(e){this.currentValue=e},immediate:!0}}},Te=We,Pe=Object(S["a"])(Te,je,Me,!1,null,null,null),qe=Pe.exports,De={name:"GenerateForm",components:{GenerateFormItem:qe},props:["data","defaultModel"],data:function(){return{models:{id:""},rules:{}}},methods:{generateModel:function(){var e=this;this.defaultModel&&this.defaultModel.id&&(this.models.id=this.defaultModel.id);var t=$(this.data.list);t.forEach((function(t){var a=t.options.defaultValue;e.defaultModel&&e.defaultModel.hasOwnProperty(t.model)&&(a=e.defaultModel[t.model]),e.$set(e.models,t.model.toLowerCase(),a);var i=C(t.rules,e.models);i.length>0&&e.$set(e.rules,t.model,i)}))},getData:function(){var e=this;return new Promise((function(t,a){e.$refs.generateForm.validate((function(i){i?t(e.models):a(new Error("校验失败"))}))}))},reset:function(){this.$refs.generateForm.resetFields()},onInputChange:function(e,t){this.$emit("on-change",t,e,this.models)}},created:function(){this.generateModel(),console.log(this.models),console.log(this.rules)}},Ne=De,Ee=Object(S["a"])(Ne,ze,Fe,!1,null,null,null),Re=Ee.exports,Ie={name:"FormPreview",components:{GenerateForm:Re},data:function(){return{previewModal:!1,modelDialog:!1,widgetForm:{list:[],config:{name:"表单名称",labelWidth:100,labelPosition:"right",size:"default"}},submitResult:""}},methods:{open:function(e){this.previewModal=!0,this.widgetForm=Object(m["a"])(e)},formSubmit:function(){var e=this;this.$refs.generateForm.getData().then((function(t){e.modelDialog=!0,e.submitResult=JSON.stringify(t,null,2)})).catch((function(e){}))},formReset:function(){this.$refs.generateForm.reset()}}},Be=Ie,Ae=Object(S["a"])(Be,Oe,Se,!1,null,null,null),He=Ae.exports;function Le(e,t,a,i,l,o,n){try{var s=e[o](n),r=s.value}catch(d){return void a(d)}s.done?t(r):Promise.resolve(r).then(i,l)}function Je(e){return function(){var t=this,a=arguments;return new Promise((function(i,l){var o=e.apply(t,a);function n(e){Le(o,i,l,n,s,"next",e)}function s(e){Le(o,i,l,n,s,"throw",e)}n(void 0)}))}}var Qe={name:"fm-container",components:{FormPreview:He,WidgetConfig:Ve,FormConfig:G,Draggable:c.a,WidgetForm:T},mixins:[p["a"]],provide:function(){return{ConfigRoot:this}},props:{basicFields:{type:Array,default:function(){return["input","textarea","number","radio","checkbox","select","time","date","switch","color","rate","slider"]}},layoutFields:{type:Array,default:function(){return["grid","divider"]}},status:{type:String,default:"create"}},data:function(){return{basicComponents:P,layoutComponents:q,visible:!1,widgetForm:{list:[],config:{formName:"表单名称",labelWidth:100,labelPosition:"right",size:"default"}},widgetFormBuffer:null,tabs:[{key:"widget",title:"控件属性"},{key:"form",title:"表单属性"}],activeTab:"widget",widgetFormSelect:null,closeModal:!1,jsonOptions:"",jsonModal:!1}},watch:{visible:function(e){var t=this;!1===e?this.timer=setTimeout((function(){t.removeScrollEffect()}),200):(this.timer&&clearTimeout(this.timer),this.addScrollEffect())}},computed:{topTitle:function(){return"".concat("create"===this.status?"新增":"编辑","单据元数据\n      ").concat(this.widgetForm.config.formName?"["+this.widgetForm.config.formName+"]":"")},isEdit:function(){return!(JSON.stringify(this.widgetForm)===JSON.stringify(this.widgetFormBuffer))},allFields:function(){return $(this.widgetForm.list)},repeatModels:function(){for(var e=[],t={},a=0;a<this.allFields.length;a++)t.hasOwnProperty(this.allFields[a].model)?e.push(this.allFields[a].model):t[this.allFields[a].model]=!0;return e}},mounted:function(){document.addEventListener("keydown",this.keypadSave)},beforeDestroy:function(){document.removeEventListener("keydown",this.keypadSave)},methods:{open:function(e){this.visible=!0,this.widgetForm=Object(m["a"])(e),this.widgetFormBuffer=Object(m["a"])(e),this.activeTab="form",this.widgetForm.list.length>0?this.widgetFormSelect=this.widgetForm.list[0]:this.widgetFormSelect=null},setWidgetFormId:function(e){this.widgetForm.config.id=e,this.widgetFormBuffer.config.id=e},close:function(){this.isEdit?this.closeModal=!0:(this.visible=!1,this.$emit("on-close"))},closeSave:function(){var e=Je(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.handleSave();case 3:this.closeModal=!1,this.visible=!1,this.$emit("on-close");case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleClear:function(){0!==this.widgetForm.list.length&&(this.widgetForm.list=[],this.widgetFormSelect={})},keypadSave:function(e){83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),this.handleSave()),27===e.keyCode&&(e.preventDefault(),this.close())},handleSave:function(){var e=Je(d.a.mark((function e(){var t;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.formConfig.validatorForm();case 2:t=e.sent,t?(this.widgetFormBuffer=Object(m["a"])(this.widgetForm),this.$emit("on-save",this.widgetForm,this.allFields)):(this.$notice.danger({title:"校验失败",desc:"表单单据属性校验失败，请填写完整后保存。"}),this.activeTab="form");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAddWidget:function(e){this.widgetForm.list.push(e),this.$refs.widgetForm.handleWidgetAdd({newIndex:this.widgetForm.list.length-1}),this.activeTab="widget"},handleMove:function(){return!0},handleShowJson:function(){this.jsonModal=!0,this.jsonOptions=JSON.stringify(this.widgetForm,null,2)},jsonChange:function(e){try{this.widgetForm=JSON.parse(e)}catch(t){}},handlePreview:function(){0!==this.widgetForm.list.length?this.$refs.formPreview.open(this.widgetForm):this.$message({type:"danger",content:"没有配置信息项，请配置后预览"})}}},Ge=Qe,Xe=(a("64cf"),Object(S["a"])(Ge,n,s,!1,null,null,null)),Ke=Xe.exports,Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("page-header-wrap",{attrs:{"show-close":"",title:"["+e.formMeta.formName+"] 视图配置"},on:{"on-close":e.close}},[a("div",{staticClass:"view-container"},[a("div",{staticClass:"view-wrap"},[a("v-title-bar",{attrs:{label:"视图预览","tip-pos":"left"}}),a("v-table-wrap",[a("v-filter-bar",[a("v-filter-item",{attrs:{title:"单据名称"}},[a("b-input",{attrs:{placeholder:"请输入"}})],1),a("v-filter-item")],1),a("v-table-tool-bar",[a("b-button",{attrs:{type:"primary",icon:"ios-add-circle-outline"}},[e._v("新 增")])],1),a("b-table",{attrs:{columns:e.columns,data:e.list,loading:e.listLoading},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.row;return[a("b-button",{attrs:{type:"text"},on:{click:function(t){return e.handleModify(i)}}},[e._v("编辑")]),[a("b-divider",{attrs:{type:"vertical"}}),a("b-button",{attrs:{type:"text","text-color":"danger"},on:{click:function(t){return e.handleRemove(i)}}},[e._v("删除")])],0===i.pubStatus?[a("b-divider",{attrs:{type:"vertical"}}),a("b-button",{attrs:{type:"text","text-color":"success"},on:{click:function(t){return e.handlePublish(i)}}},[e._v("发布")])]:e._e()]}}],null,!1,3837799332)}),a("b-page",{attrs:{total:50}})],1)],1),a("div",{staticClass:"view-config"},[a("v-title-bar",{attrs:{label:"视图配置","tip-pos":"left"}})],1)])]):e._e()},Ye=[],Ze={name:"ViewConfig",data:function(){return{visible:!1,columns:[{title:"数据列一",key:"col1"},{title:"数据列二",key:"col2"},{title:"数据列三",key:"col3"},{title:"数据列四",key:"col4"},{title:"操作",slot:"action",width:160}],list:[{col1:"第一行",col2:"行列2",col3:"行列3",col4:"行列4"},{col1:"行列1",col2:"行列2",col3:"行列3",col4:"行列4"},{col1:"行列1",col2:"行列2",col3:"行列3",col4:"行列4"},{col1:"行列1",col2:"行列2",col3:"行列3",col4:"行列4"},{col1:"行列1",col2:"行列2",col3:"行列3",col4:"行列4"}],formMeta:{id:"",formName:""}}},methods:{open:function(e){this.visible=!0,this.formMeta=Object(m["a"])(e)},close:function(){this.visible=!1,this.list=[],this.$emit("on-close")}}},et=Ze,tt=(a("a154"),Object(S["a"])(et,Ue,Ye,!1,null,"7bd0b2d9",null)),at=tt.exports,it={name:"TableDemo",components:{ViewConfig:at,FmContainer:Ke},mixins:[o["a"]],data:function(){return{listQuery:{name:""},columns:[{title:"表单据名称",key:"name"},{title:"表名",key:"tableName"},{title:"创建日期",key:"createDate"},{title:"视图配置",slot:"viewConfig",align:"center",width:110},{title:"操作",slot:"action",width:140}],widgetForm:{list:[],config:{name:"表单名称",labelWidth:100,labelPosition:"right",size:"default"}},formStatus:"create"}},created:function(){this.resetFormTable(),this.searchList()},methods:{resetQuery:function(){this.listQuery={page:1,size:10,name:""}},handleCreate:function(){this.formStatus="create",this.resetFormTable(),this.$refs.fmContainer.open(this.widgetForm)},handleModify:function(e){this.formStatus="edit";var t={list:[{type:"input",name:"姓名",icon:"ios-create",options:{width:"100%",defaultValue:"",required:!0,placeholder:"",disabled:!1,length:null,showWordCount:!1,clearable:!1},key:"1599806302000_30782",model:"name",rules:[{name:"$required",message:"姓名必填",type:"string",trigger:"blur"}]},{type:"grid",name:"栅格布局",icon:"ios-grid",columns:[{span:12,list:[{type:"select",name:"学历",icon:"ios-arrow-dropdown",options:{defaultValue:"",multiple:!1,maxTagCount:null,disabled:!1,clearable:!1,placeholder:"",required:!0,width:"100%",options:[{value:"Option 1",label:"大专"},{value:"Option 2",label:"二本"},{value:"Option 3",label:"一本"}],filterable:!1},key:"1599811766000_36358",model:"xueli",rules:[{name:"$required",message:"学历必填",type:"string",trigger:"change"}]}]},{span:12,list:[{type:"radio",name:"性别",icon:"ios-radio-button-on",options:{inline:!0,defaultValue:"Option 1",options:[{value:"Option 1",label:"男"},{value:"Option 2",label:"女"}],required:!0,width:"",disabled:!1,buttonModel:!1,size:"small",active:"primary"},key:"1599806308000_26926",model:"sex",rules:[{name:"$required",message:"性别必填",type:"string",trigger:"change"}]}]}],options:{gutter:8,justify:"start",align:"top"},key:"1599806304000_26845",model:"grid_1599806304201",rules:[]},{type:"input",name:"手机号",icon:"ios-create",options:{width:"100%",defaultValue:"",required:!0,placeholder:"",disabled:!1,length:null,showWordCount:!1,clearable:!1},key:"1599811834000_13998",model:"phone",rules:[{name:"$required",message:"手机号必填",type:"string",trigger:"blur"},{name:"$phone",message:"手机号格式不正确",type:"string",trigger:"blur"}]},{type:"textarea",name:"地址",icon:"ios-paper",options:{width:"100%",defaultValue:"",required:!1,disabled:!1,placeholder:"",length:null,showWordCount:!0},key:"1599806625000_2700",model:"address",rules:[{name:"$length",min:0,max:100,message:"长度必须在指定的范围内",type:"string",trigger:"blur"}]}],config:{name:"表单名称",labelWidth:100,labelPosition:"right",size:"default"}},a={list:[{type:"input",name:"单行文本",icon:"ios-create",options:{width:"100%",defaultValue:"",required:!1,placeholder:"",disabled:!1,length:null,showWordCount:!1,clearable:!1},key:"1599815428000_33294",model:"input_1599815428706",rules:[]},{type:"textarea",name:"多行文本",icon:"ios-paper",options:{width:"100%",defaultValue:"",required:!1,disabled:!1,placeholder:"",length:null,showWordCount:!1},key:"1599815429000_57463",model:"textarea_1599815429160",rules:[]},{type:"divider",name:"分割线",icon:"ios-remove",options:{align:"left",fontSize:"14px",margin:"12px 0"},key:"1599815440000_15518",model:"divider_1599815440709",rules:[]},{type:"radio",name:"单选框组",icon:"ios-radio-button-on",options:{inline:!0,defaultValue:"",options:[{value:"Option 1",label:"选项一"},{value:"Option 2",label:"选项二"},{value:"Option 3",label:"选项三"}],required:!1,width:"",disabled:!1,buttonModel:!1,size:"small",active:"primary"},key:"1599815430000_22395",model:"radio_1599815430037",rules:[]},{type:"grid",name:"栅格布局",icon:"ios-grid",columns:[{span:6,list:[{type:"switch",name:"开关",icon:"ios-switch",options:{defaultValue:!1,required:!1,disabled:!1,size:"default",openText:"",closeText:""},key:"1599815463000_21586",model:"switch_1599815463762",rules:[]}]},{span:6,list:[{type:"color",name:"颜色选择器",icon:"ios-color-palette",options:{defaultValue:"",disabled:!1,alpha:!1,required:!1,recommend:!1},key:"1599815467000_26060",model:"color_1599815467590",rules:[]}]},{span:6,list:[{type:"rate",name:"评分",icon:"favor",options:{defaultValue:0,max:5,disabled:!1,allowHalf:!1,required:!1,showScore:!1},key:"1599815472000_6539",model:"rate_1599815472902",rules:[]}]},{span:6,list:[{type:"number",name:"计数器",icon:"ios-calculator",options:{width:"",required:!1,defaultValue:null,min:null,max:null,step:1,precision:null,disabled:!1},key:"1599815480000_62225",model:"number_1599815480512",rules:[]}]}],options:{gutter:8,justify:"start",align:"top"},key:"1599815441000_24603",model:"grid_1599815441405",rules:[]},{type:"checkbox",name:"多选框组",icon:"ios-checkbox-outline",options:{inline:!0,defaultValue:[],options:[{value:"Option 1",label:"选项一"},{value:"Option 2",label:"选项二"},{value:"Option 3",label:"选项三"}],required:!1,width:"",disabled:!1},key:"1599815430000_95806",model:"checkbox_1599815430557",rules:[]},{type:"select",name:"下拉选择框",icon:"ios-arrow-dropdown",options:{defaultValue:"",multiple:!1,maxTagCount:null,disabled:!1,clearable:!1,placeholder:"",required:!1,width:"200px",options:[{value:"Option 1",label:"选项一"},{value:"Option 2",label:"选项二"},{value:"Option 3",label:"选项三"}],filterable:!1},key:"1599815430000_95977",model:"select_1599815430899",rules:[]},{type:"time",icon:"ios-timer",name:"时间选择器",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!0,clearable:!0,placeholder:"",isRange:!1,format:"HH:mm:ss",required:!1,width:"200px"},key:"1599815431000_31535",model:"time_1599815431367",rules:[]},{type:"date",name:"日期选择器",icon:"ios-calendar",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!0,clearable:!0,placeholder:"",type:"date",format:"yyyy-MM-dd",required:!1,width:"200px"},key:"1599815431000_46737",model:"date_1599815431699",rules:[]},{type:"slider",name:"滑块",icon:"ios-options",options:{defaultValue:0,disabled:!1,required:!1,min:0,max:100,step:1,showInput:!1,width:""},key:"1599815433000_52335",model:"slider_1599815433410",rules:[]}],config:{name:"表单名称",labelWidth:100,labelPosition:"right",size:"default"}};0===e.id?this.$refs.fmContainer.open(t):this.$refs.fmContainer.open(a)},handleCheck:function(e){},handleRemove:function(e){this.$notice.success({title:"删除成功"})},handleConfigView:function(e){var t={list:[{type:"input",name:"姓名",icon:"ios-create",options:{width:"100%",defaultValue:"",required:!0,placeholder:"",disabled:!1,length:null,showWordCount:!1,clearable:!1},key:"1599806302000_30782",model:"name",rules:[{name:"$required",message:"姓名必填",type:"string",trigger:"blur"}]},{type:"grid",name:"栅格布局",icon:"ios-grid",columns:[{span:12,list:[{type:"select",name:"学历",icon:"ios-arrow-dropdown",options:{defaultValue:"",multiple:!1,maxTagCount:null,disabled:!1,clearable:!1,placeholder:"",required:!0,width:"100%",options:[{value:"Option 1",label:"大专"},{value:"Option 2",label:"二本"},{value:"Option 3",label:"一本"}],filterable:!1},key:"1599811766000_36358",model:"xueli",rules:[{name:"$required",message:"学历必填",type:"string",trigger:"change"}]}]},{span:12,list:[{type:"radio",name:"性别",icon:"ios-radio-button-on",options:{inline:!0,defaultValue:"Option 1",options:[{value:"Option 1",label:"男"},{value:"Option 2",label:"女"}],required:!0,width:"",disabled:!1,buttonModel:!1,size:"small",active:"primary"},key:"1599806308000_26926",model:"sex",rules:[{name:"$required",message:"性别必填",type:"string",trigger:"change"}]}]}],options:{gutter:8,justify:"start",align:"top"},key:"1599806304000_26845",model:"grid_1599806304201",rules:[]},{type:"input",name:"手机号",icon:"ios-create",options:{width:"100%",defaultValue:"",required:!0,placeholder:"",disabled:!1,length:null,showWordCount:!1,clearable:!1},key:"1599811834000_13998",model:"phone",rules:[{name:"$required",message:"手机号必填",type:"string",trigger:"blur"},{name:"$phone",message:"手机号格式不正确",type:"string",trigger:"blur"}]},{type:"textarea",name:"地址",icon:"ios-paper",options:{width:"100%",defaultValue:"",required:!1,disabled:!1,placeholder:"",length:null,showWordCount:!0},key:"1599806625000_2700",model:"address",rules:[{name:"$length",min:0,max:100,message:"长度必须在指定的范围内",type:"string",trigger:"blur"}]}],config:{name:"表单名称",labelWidth:100,labelPosition:"right",size:"default"}},a={list:[{type:"input",name:"单行文本",icon:"ios-create",options:{width:"100%",defaultValue:"",required:!1,placeholder:"",disabled:!1,length:null,showWordCount:!1,clearable:!1},key:"1599815428000_33294",model:"input_1599815428706",rules:[]},{type:"textarea",name:"多行文本",icon:"ios-paper",options:{width:"100%",defaultValue:"",required:!1,disabled:!1,placeholder:"",length:null,showWordCount:!1},key:"1599815429000_57463",model:"textarea_1599815429160",rules:[]},{type:"divider",name:"分割线",icon:"ios-remove",options:{align:"left",fontSize:"14px",margin:"12px 0"},key:"1599815440000_15518",model:"divider_1599815440709",rules:[]},{type:"radio",name:"单选框组",icon:"ios-radio-button-on",options:{inline:!0,defaultValue:"",options:[{value:"Option 1",label:"选项一"},{value:"Option 2",label:"选项二"},{value:"Option 3",label:"选项三"}],required:!1,width:"",disabled:!1,buttonModel:!1,size:"small",active:"primary"},key:"1599815430000_22395",model:"radio_1599815430037",rules:[]},{type:"grid",name:"栅格布局",icon:"ios-grid",columns:[{span:6,list:[{type:"switch",name:"开关",icon:"ios-switch",options:{defaultValue:!1,required:!1,disabled:!1,size:"default",openText:"",closeText:""},key:"1599815463000_21586",model:"switch_1599815463762",rules:[]}]},{span:6,list:[{type:"color",name:"颜色选择器",icon:"ios-color-palette",options:{defaultValue:"",disabled:!1,alpha:!1,required:!1,recommend:!1},key:"1599815467000_26060",model:"color_1599815467590",rules:[]}]},{span:6,list:[{type:"rate",name:"评分",icon:"favor",options:{defaultValue:0,max:5,disabled:!1,allowHalf:!1,required:!1,showScore:!1},key:"1599815472000_6539",model:"rate_1599815472902",rules:[]}]},{span:6,list:[{type:"number",name:"计数器",icon:"ios-calculator",options:{width:"",required:!1,defaultValue:null,min:null,max:null,step:1,precision:null,disabled:!1},key:"1599815480000_62225",model:"number_1599815480512",rules:[]}]}],options:{gutter:8,justify:"start",align:"top"},key:"1599815441000_24603",model:"grid_1599815441405",rules:[]},{type:"checkbox",name:"多选框组",icon:"ios-checkbox-outline",options:{inline:!0,defaultValue:[],options:[{value:"Option 1",label:"选项一"},{value:"Option 2",label:"选项二"},{value:"Option 3",label:"选项三"}],required:!1,width:"",disabled:!1},key:"1599815430000_95806",model:"checkbox_1599815430557",rules:[]},{type:"select",name:"下拉选择框",icon:"ios-arrow-dropdown",options:{defaultValue:"",multiple:!1,maxTagCount:null,disabled:!1,clearable:!1,placeholder:"",required:!1,width:"200px",options:[{value:"Option 1",label:"选项一"},{value:"Option 2",label:"选项二"},{value:"Option 3",label:"选项三"}],filterable:!1},key:"1599815430000_95977",model:"select_1599815430899",rules:[]},{type:"time",icon:"ios-timer",name:"时间选择器",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!0,clearable:!0,placeholder:"",isRange:!1,format:"HH:mm:ss",required:!1,width:"200px"},key:"1599815431000_31535",model:"time_1599815431367",rules:[]},{type:"date",name:"日期选择器",icon:"ios-calendar",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!0,clearable:!0,placeholder:"",type:"date",format:"yyyy-MM-dd",required:!1,width:"200px"},key:"1599815431000_46737",model:"date_1599815431699",rules:[]},{type:"slider",name:"滑块",icon:"ios-options",options:{defaultValue:0,disabled:!1,required:!1,min:0,max:100,step:1,showInput:!1,width:""},key:"1599815433000_52335",model:"slider_1599815433410",rules:[]}],config:{name:"表单名称",labelWidth:100,labelPosition:"right",size:"default"}};this.dialogStatus="viewConfig",this.$refs.viewConfig.open(0===e.id?t:a)},handleSave:function(e){console.log(e),this.$log.success("-------保存成功--------")},resetFormTable:function(){this.widgetForm={list:[],config:{name:"表单名称",labelWidth:100,labelPosition:"right",size:"default"}}},searchList:function(){this.setListData({list:[{id:0,name:"测试表单据",tableName:"TABLE_TEST",createDate:"2020-09-11"},{id:1,name:"全控件测试",tableName:"TABLE_TEST2",createDate:"2020-09-11"}],total:2})}}},lt=it,ot=Object(S["a"])(lt,i,l,!1,null,null,null);t["default"]=ot.exports},"41bf":function(e,t,a){"use strict";var i=a("8179"),l=a.n(i);l.a},"64ae":function(e,t,a){},"64cf":function(e,t,a){"use strict";var i=a("fd08"),l=a.n(i);l.a},8179:function(e,t,a){},a154:function(e,t,a){"use strict";var i=a("1951"),l=a.n(i);l.a},a33f:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return r}));function i(e){var t=/^(([1-3][0-9]{3})[-]{0,1}(((0[13578]|1[02])[-]{0,1}(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)[-]{0,1}(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8])))\s\d{1,2}:\d{1,2}:\d{1,2})|(([1-3][0-9]{3})[-]{0,1}(((0[13578]|1[02])[-]{0,1}(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8])))\s\d{1,2}:\d{1,2})|(([1-3][0-9]{3})[-]{0,1}(((0[13578]|1[02])[-]{0,1}(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)[-]{0,1}(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8]))))$/;return t.test(e)}function l(e){var t={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"河南",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};if(!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(e))return!1;if(e=e.replace(/x$/i,"a"),null==t[parseInt(e.substr(0,2))])return!1;var a=e.substr(6,4)+"-"+Number(e.substr(10,2))+"-"+Number(e.substr(12,2)),i=new Date(a.replace(/-/g,"/"));if(a!==i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate())return!1;for(var l=0,o=17;o>=0;o--)l+=Math.pow(2,o)%11*parseInt(e.charAt(17-o),11);return l%11===1}function o(e){if(!/^[0-9ABCDEFGHJKLMNPQRTUWXY]{18}$/.test(e))return!1;for(var t="0123456789ABCDEFGHJKLMNPQRTUWXY",a=[1,3,9,27,19,26,16,17,20,29,25,13,8,24,10,30,28],i=0,l=0;l<17;l++){var o=t.indexOf(e[l]);if(o<0)return!1;i+=o*a[l]}i%=31;var n=t[(31-i)%31];return n===e[17]}function n(e){e=String(e);for(var t,a=10,i=0;i<15;i++)t=a%11+parseInt(e[i]),a=t%10*2,0===a&&(a=20);return t%10===1}function s(e){var t=/^[0-9]{15}$/;return t.test(e)&&n(e)}function r(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=/^[0-9A-Z]{8}-?[0-9X]$/,i=[3,7,9,10,5,8,4,2],l="0123456789X0";function o(e){e=String(e);for(var a,o=e.replace("-",""),n=0,s=0;s<8;s++)a=t.indexOf(o[s]),n+=a*i[s];return n%=11,l[11-n]===o[8]}return a.test(e)&&o(e)}},c9c4:function(e,t,a){},fcfa:function(e,t,a){"use strict";var i=a("64ae"),l=a.n(i);l.a},fd03:function(e,t,a){"use strict";var i=a("ad03");t["a"]={methods:{checkScrollBar(){let e=window.innerWidth;if(!e){const t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.bodyIsOverflowing&&(this.scrollBarWidth=Object(i["b"])())},checkMaskInVisible(){let e=document.getElementsByClassName("bin-modal-mask")||[];return Array.from(e).every(e=>"none"===e.style.display||e.classList.contains("fade-in-linear-leave-to"))},setScrollBar(){this.bodyIsOverflowing&&void 0!==this.scrollBarWidth&&(document.body.style.paddingRight=`${this.scrollBarWidth}px`)},resetScrollBar(){document.body.style.paddingRight=""},addScrollEffect(){this.checkScrollBar(),this.setScrollBar(),document.body.style.overflow="hidden"},removeScrollEffect(){this.checkMaskInVisible()&&(document.body.style.overflow="",this.resetScrollBar())}}}},fd08:function(e,t,a){}}]);